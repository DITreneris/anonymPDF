(venv) PS C:\Users\tomas\Desktop\0001 DUOMENU ANALITIKA\038_AnonymPDF> pytest --cache-clear
=================================================================================== test session starts ====================================================================================
platform win32 -- Python 3.11.9, pytest-7.4.3, pluggy-1.6.0
rootdir: C:\Users\tomas\Desktop\0001 DUOMENU ANALITIKA\038_AnonymPDF
configfile: pytest.ini
testpaths: tests
plugins: anyio-3.7.1, asyncio-0.21.1, cov-4.1.0
asyncio: mode=Mode.STRICT
collected 272 items

tests\test_analytics_api.py .......................                                                                                                                                   [  8%]
tests\test_analytics_engine.py ......                                                                                                                                                 [ 10%]
tests\test_config_manager.py ...                                                                                                                                                      [ 11%]
tests\test_feedback_system.py ....                                                                                                                                                    [ 13%]
tests\test_intelligent_cache.py .............................                                                                                                                         [ 23%]
tests\test_lithuanian_pii.py ..F.FFF.......                                                                                                                                           [ 29%]
tests\test_memory_optimizer.py ......................                                                                                                                                 [ 37%]
tests\test_ml_integration_layer.py .........                                                                                                                                          [ 40%]
tests\test_pdf_processor.py sssF.F                                                                                                                                                    [ 42%]
tests\test_performance.py ........                                                                                                                                                    [ 45%]
tests\test_performance_enhanced.py .......                                                                                                                                            [ 48%]
tests\test_performance_optimizer.py ........................                                                                                                                          [ 56%]
tests\test_pii_patterns.py ......                                                                                                                                                     [ 59%]
tests\test_priority2_enhancements.py .........FF................                                                                                                                      [ 69%]
tests\test_real_time_monitor.py .......                                                                                                                                               [ 71%]
tests\test_training_data_collector.py .........                                                                                                                                       [ 75%]
tests\test_validation_utils.py ........................                                                                                                                               [ 83%]
tests\adaptive\test_ab_testing.py ........                                                                                                                                            [ 86%]
tests\adaptive\test_doc_classifier.py ........                                                                                                                                        [ 89%]
tests\adaptive\test_online_learner.py ....                                                                                                                                            [ 91%]
tests\adaptive\test_pattern_db.py .....                                                                                                                                               [ 93%]
tests\adaptive\test_pattern_learner.py ....FF.                                                                                                                                        [ 95%]
tests\adaptive\test_processing_rules.py ....                                                                                                                                          [ 97%]
tests\api\test_pdf_endpoint.py ..                                                                                                                                                     [ 97%]
tests\system\test_adaptive_workflow.py .....                                                                                                                                          [ 99%]
tests\system\test_real_time_monitor_integration.py F                                                                                                                                  [100%]

========================================================================================= FAILURES =========================================================================================
_____________________________________________________________ TestLithuanianIntegration.test_simple_lithuanian_names_detection _____________________________________________________________
tests\test_lithuanian_pii.py:81: in test_simple_lithuanian_names_detection
    assert "Linas Vaitkus" in detected_names
E   AssertionError: assert 'Linas Vaitkus' in set()
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-21 15:37:17,734 - anonympdf.adaptive_pattern_db - INFO - Table 'adaptive_patterns' is ready.
2025-06-21 15:37:17,735 - anonympdf.adaptive_pattern_db - INFO - AdaptivePatternDB initialized (manages session: False).
2025-06-21 15:37:17,750 - anonympdf.adaptive_learning.processing_rules - INFO - Successfully loaded 4 rule sets from config\processing_rules.yaml
2025-06-21 15:37:17,750 - anonympdf.adaptive_learning.processing_rules - INFO - ProcessingRuleManager initialized with 4 rule sets.
2025-06-21 15:37:17,751 - anonympdf.adaptive_learning.doc_classifier - INFO - DocumentClassifier initialized.
2025-06-21 15:37:17,767 - anonympdf.adaptive_learning.processing_rules - INFO - Successfully loaded 4 rule sets from config\processing_rules.yaml
2025-06-21 15:37:17,767 - anonympdf.adaptive_learning.processing_rules - INFO - ProcessingRuleManager initialized with 4 rule sets.
2025-06-21 15:37:22,314 - anonympdf.anonympdf.feedback_system - INFO - FeedbackAnalyzer initialized
2025-06-21 15:37:22,314 - anonympdf.anonympdf.feedback_system - INFO - UserFeedbackProcessor initialized
2025-06-21 15:37:22,315 - anonympdf.anonympdf.pattern_learner - INFO - PatternLearner initialized - {'min_confidence': 0.95}
2025-06-21 15:37:22,315 - anonympdf.adaptive_learning.coordinator - INFO - AdaptiveLearningCoordinator initialized.
2025-06-21 15:37:22,315 - anonympdf.pdf - INFO - Initializing PDF processor with Priority 2 enhancements
2025-06-21 15:37:22,315 - anonympdf.pdf - INFO - Configuration manager loaded - {"patterns_count": 38, "cities_count": 81}
2025-06-21 15:37:22,332 - config_manager - INFO - Patterns loaded and compiled from file - {"file": "config\\patterns.yaml", "patterns_count": 39}
2025-06-21 15:37:22,353 - config_manager - INFO - Cities loaded from file - {"file": "config\\cities.yaml", "cities_count": 79}
2025-06-21 15:37:22,381 - config_manager - INFO - Settings loaded from file - {"file": "config\\settings.yaml"}
2025-06-21 15:37:22,421 - config_manager - INFO - Brand names loaded from file - {"file": "config\\brand_names.yaml", "count": 0}
2025-06-21 15:37:22,421 - config_manager - INFO - Configuration manager initialized - {"config_dir": "config", "patterns_count": 39, "cities_count": 79}
2025-06-21 15:37:22,421 - anonympdf.pdf - INFO - Priority 2 context-aware components initialized
2025-06-21 15:37:23,086 - anonympdf.pdf - INFO - English spaCy model loaded successfully - {"model": "en_core_web_sm", "components": 6, "method": "standard"}
2025-06-21 15:37:24,045 - anonympdf.pdf - INFO - Lithuanian spaCy model loaded successfully - {"model": "lt_core_news_sm", "components": 7, "method": "standard"}
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-21 15:37:24,048 - anonympdf.adaptive_pattern_db - INFO - Retrieved 0 active patterns from the database.
2025-06-21 15:37:24,048 - anonympdf.pdf - INFO - Using Lithuanian NLP model for processing
2025-06-21 15:37:24,057 - anonympdf.performance - INFO - Performance tracking: pii_detection - {"duration": 0.009821414947509766, "memory_delta": 0.08203125}
__________________________________________________________ TestLithuanianIntegration.test_anti_overredaction_in_technical_context __________________________________________________________
tests\test_lithuanian_pii.py:96: in test_anti_overredaction_in_technical_context
    assert "Vilniaus" in detected_locations
E   AssertionError: assert 'Vilniaus' in set()
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-21 15:37:30,527 - anonympdf.adaptive_pattern_db - INFO - Table 'adaptive_patterns' is ready.
2025-06-21 15:37:30,527 - anonympdf.adaptive_pattern_db - INFO - AdaptivePatternDB initialized (manages session: False).
2025-06-21 15:37:30,544 - anonympdf.adaptive_learning.processing_rules - INFO - Successfully loaded 4 rule sets from config\processing_rules.yaml
2025-06-21 15:37:30,544 - anonympdf.adaptive_learning.processing_rules - INFO - ProcessingRuleManager initialized with 4 rule sets.
2025-06-21 15:37:30,544 - anonympdf.adaptive_learning.doc_classifier - INFO - DocumentClassifier initialized.
2025-06-21 15:37:30,560 - anonympdf.adaptive_learning.processing_rules - INFO - Successfully loaded 4 rule sets from config\processing_rules.yaml
2025-06-21 15:37:30,560 - anonympdf.adaptive_learning.processing_rules - INFO - ProcessingRuleManager initialized with 4 rule sets.
2025-06-21 15:37:35,456 - anonympdf.anonympdf.feedback_system - INFO - FeedbackAnalyzer initialized
2025-06-21 15:37:35,456 - anonympdf.anonympdf.feedback_system - INFO - UserFeedbackProcessor initialized
2025-06-21 15:37:35,456 - anonympdf.anonympdf.pattern_learner - INFO - PatternLearner initialized - {'min_confidence': 0.95}
2025-06-21 15:37:35,456 - anonympdf.adaptive_learning.coordinator - INFO - AdaptiveLearningCoordinator initialized.
2025-06-21 15:37:35,456 - anonympdf.pdf - INFO - Initializing PDF processor with Priority 2 enhancements
2025-06-21 15:37:35,457 - anonympdf.pdf - INFO - Configuration manager loaded - {"patterns_count": 38, "cities_count": 81}
2025-06-21 15:37:35,475 - config_manager - INFO - Patterns loaded and compiled from file - {"file": "config\\patterns.yaml", "patterns_count": 39}
2025-06-21 15:37:35,486 - config_manager - INFO - Cities loaded from file - {"file": "config\\cities.yaml", "cities_count": 79}
2025-06-21 15:37:35,505 - config_manager - INFO - Settings loaded from file - {"file": "config\\settings.yaml"}
2025-06-21 15:37:35,542 - config_manager - INFO - Brand names loaded from file - {"file": "config\\brand_names.yaml", "count": 0}
2025-06-21 15:37:35,542 - config_manager - INFO - Configuration manager initialized - {"config_dir": "config", "patterns_count": 39, "cities_count": 79}
2025-06-21 15:37:35,543 - anonympdf.pdf - INFO - Priority 2 context-aware components initialized
2025-06-21 15:37:36,238 - anonympdf.pdf - INFO - English spaCy model loaded successfully - {"model": "en_core_web_sm", "components": 6, "method": "standard"}
2025-06-21 15:37:37,153 - anonympdf.pdf - INFO - Lithuanian spaCy model loaded successfully - {"model": "lt_core_news_sm", "components": 7, "method": "standard"}
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-21 15:37:37,155 - anonympdf.adaptive_pattern_db - INFO - Retrieved 0 active patterns from the database.
2025-06-21 15:37:37,156 - anonympdf.pdf - INFO - Using Lithuanian NLP model for processing
2025-06-21 15:37:37,165 - anonympdf.performance - INFO - Performance tracking: pii_detection - {"duration": 0.010121345520019531, "memory_delta": 0.05859375}
____________________________________________________________ TestLithuanianIntegration.test_anti_overredaction_of_common_words _____________________________________________________________
tests\test_lithuanian_pii.py:113: in test_anti_overredaction_of_common_words
    assert "+370 699 99999" in all_redacted_text
E   AssertionError: assert '+370 699 99999' in ['Jonas Petraitis', '99999']
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-21 15:37:37,182 - anonympdf.adaptive_pattern_db - INFO - Table 'adaptive_patterns' is ready.
2025-06-21 15:37:37,182 - anonympdf.adaptive_pattern_db - INFO - AdaptivePatternDB initialized (manages session: False).
2025-06-21 15:37:37,198 - anonympdf.adaptive_learning.processing_rules - INFO - Successfully loaded 4 rule sets from config\processing_rules.yaml
2025-06-21 15:37:37,198 - anonympdf.adaptive_learning.processing_rules - INFO - ProcessingRuleManager initialized with 4 rule sets.
2025-06-21 15:37:37,199 - anonympdf.adaptive_learning.doc_classifier - INFO - DocumentClassifier initialized.
2025-06-21 15:37:37,214 - anonympdf.adaptive_learning.processing_rules - INFO - Successfully loaded 4 rule sets from config\processing_rules.yaml
2025-06-21 15:37:37,214 - anonympdf.adaptive_learning.processing_rules - INFO - ProcessingRuleManager initialized with 4 rule sets.
2025-06-21 15:37:41,461 - anonympdf.anonympdf.feedback_system - INFO - FeedbackAnalyzer initialized
2025-06-21 15:37:41,462 - anonympdf.anonympdf.feedback_system - INFO - UserFeedbackProcessor initialized
2025-06-21 15:37:41,462 - anonympdf.anonympdf.pattern_learner - INFO - PatternLearner initialized - {'min_confidence': 0.95}
2025-06-21 15:37:41,462 - anonympdf.adaptive_learning.coordinator - INFO - AdaptiveLearningCoordinator initialized.
2025-06-21 15:37:41,462 - anonympdf.pdf - INFO - Initializing PDF processor with Priority 2 enhancements
2025-06-21 15:37:41,462 - anonympdf.pdf - INFO - Configuration manager loaded - {"patterns_count": 38, "cities_count": 81}
2025-06-21 15:37:41,479 - config_manager - INFO - Patterns loaded and compiled from file - {"file": "config\\patterns.yaml", "patterns_count": 39}
2025-06-21 15:37:41,490 - config_manager - INFO - Cities loaded from file - {"file": "config\\cities.yaml", "cities_count": 79}
2025-06-21 15:37:41,509 - config_manager - INFO - Settings loaded from file - {"file": "config\\settings.yaml"}
2025-06-21 15:37:41,545 - config_manager - INFO - Brand names loaded from file - {"file": "config\\brand_names.yaml", "count": 0}
2025-06-21 15:37:41,545 - config_manager - INFO - Configuration manager initialized - {"config_dir": "config", "patterns_count": 39, "cities_count": 79}
2025-06-21 15:37:41,546 - anonympdf.pdf - INFO - Priority 2 context-aware components initialized
2025-06-21 15:37:42,333 - anonympdf.pdf - INFO - English spaCy model loaded successfully - {"model": "en_core_web_sm", "components": 6, "method": "standard"}
2025-06-21 15:37:43,084 - anonympdf.pdf - INFO - Lithuanian spaCy model loaded successfully - {"model": "lt_core_news_sm", "components": 7, "method": "standard"}
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-21 15:37:43,086 - anonympdf.adaptive_pattern_db - INFO - Retrieved 0 active patterns from the database.
2025-06-21 15:37:43,086 - anonympdf.pdf - INFO - Using Lithuanian NLP model for processing
2025-06-21 15:37:43,095 - anonympdf.performance - INFO - Performance tracking: pii_detection - {"duration": 0.010142087936401367, "memory_delta": 0.0390625}
2025-06-21 15:37:43,096 - anonympdf.pdf - INFO - Redaction report generated - {"total_redactions": 2, "language": "lt"}
________________________________________________________________ TestLithuanianIntegration.test_redaction_report_generation ________________________________________________________________
tests\test_lithuanian_pii.py:130: in test_redaction_report_generation
    assert "+370 699 99999" in all_redacted_text
E   AssertionError: assert '+370 699 99999' in ['Jonas Petraitis', '99999']
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-21 15:37:43,111 - anonympdf.adaptive_pattern_db - INFO - Table 'adaptive_patterns' is ready.
2025-06-21 15:37:43,111 - anonympdf.adaptive_pattern_db - INFO - AdaptivePatternDB initialized (manages session: False).
2025-06-21 15:37:43,127 - anonympdf.adaptive_learning.processing_rules - INFO - Successfully loaded 4 rule sets from config\processing_rules.yaml
2025-06-21 15:37:43,127 - anonympdf.adaptive_learning.processing_rules - INFO - ProcessingRuleManager initialized with 4 rule sets.
2025-06-21 15:37:43,127 - anonympdf.adaptive_learning.doc_classifier - INFO - DocumentClassifier initialized.
2025-06-21 15:37:43,144 - anonympdf.adaptive_learning.processing_rules - INFO - Successfully loaded 4 rule sets from config\processing_rules.yaml
2025-06-21 15:37:43,144 - anonympdf.adaptive_learning.processing_rules - INFO - ProcessingRuleManager initialized with 4 rule sets.
2025-06-21 15:37:47,421 - anonympdf.anonympdf.feedback_system - INFO - FeedbackAnalyzer initialized
2025-06-21 15:37:47,422 - anonympdf.anonympdf.feedback_system - INFO - UserFeedbackProcessor initialized
2025-06-21 15:37:47,422 - anonympdf.anonympdf.pattern_learner - INFO - PatternLearner initialized - {'min_confidence': 0.95}
2025-06-21 15:37:47,422 - anonympdf.adaptive_learning.coordinator - INFO - AdaptiveLearningCoordinator initialized.
2025-06-21 15:37:47,422 - anonympdf.pdf - INFO - Initializing PDF processor with Priority 2 enhancements
2025-06-21 15:37:47,422 - anonympdf.pdf - INFO - Configuration manager loaded - {"patterns_count": 38, "cities_count": 81}
2025-06-21 15:37:47,439 - config_manager - INFO - Patterns loaded and compiled from file - {"file": "config\\patterns.yaml", "patterns_count": 39}
2025-06-21 15:37:47,451 - config_manager - INFO - Cities loaded from file - {"file": "config\\cities.yaml", "cities_count": 79}
2025-06-21 15:37:47,470 - config_manager - INFO - Settings loaded from file - {"file": "config\\settings.yaml"}
2025-06-21 15:37:47,510 - config_manager - INFO - Brand names loaded from file - {"file": "config\\brand_names.yaml", "count": 0}
2025-06-21 15:37:47,510 - config_manager - INFO - Configuration manager initialized - {"config_dir": "config", "patterns_count": 39, "cities_count": 79}
2025-06-21 15:37:47,511 - anonympdf.pdf - INFO - Priority 2 context-aware components initialized
2025-06-21 15:37:48,169 - anonympdf.pdf - INFO - English spaCy model loaded successfully - {"model": "en_core_web_sm", "components": 6, "method": "standard"}
2025-06-21 15:37:49,006 - anonympdf.pdf - INFO - Lithuanian spaCy model loaded successfully - {"model": "lt_core_news_sm", "components": 7, "method": "standard"}
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-21 15:37:49,009 - anonympdf.adaptive_pattern_db - INFO - Retrieved 0 active patterns from the database.
2025-06-21 15:37:49,009 - anonympdf.pdf - INFO - Using Lithuanian NLP model for processing
2025-06-21 15:37:49,018 - anonympdf.performance - INFO - Performance tracking: pii_detection - {"duration": 0.010117292404174805, "memory_delta": 0.03515625}
2025-06-21 15:37:49,018 - anonympdf.pdf - INFO - Redaction report generated - {"total_redactions": 2, "language": "lt"}
___________________________________________________________________ TestPDFProcessorIntegration.test_process_pdf_success ___________________________________________________________________
tests\test_pdf_processor.py:152: in test_process_pdf_success
    assert categories.get('emails') == 1
E   AssertionError: assert None == 1
E    +  where None = <built-in method get of dict object at 0x00000154A95F3440>('emails')
E    +    where <built-in method get of dict object at 0x00000154A95F3440> = {'DATE': 1, 'PERSON': 1, 'email': 1}.get
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-21 15:37:50,747 - anonympdf.adaptive_pattern_db - INFO - Table 'adaptive_patterns' is ready.
2025-06-21 15:37:50,747 - anonympdf.adaptive_pattern_db - INFO - AdaptivePatternDB initialized (manages session: False).
2025-06-21 15:37:50,773 - anonympdf.adaptive_learning.processing_rules - INFO - Successfully loaded 4 rule sets from config\processing_rules.yaml
2025-06-21 15:37:50,774 - anonympdf.adaptive_learning.processing_rules - INFO - ProcessingRuleManager initialized with 4 rule sets.
2025-06-21 15:37:50,774 - anonympdf.adaptive_learning.doc_classifier - INFO - DocumentClassifier initialized.
2025-06-21 15:37:50,799 - anonympdf.adaptive_learning.processing_rules - INFO - Successfully loaded 4 rule sets from config\processing_rules.yaml
2025-06-21 15:37:50,799 - anonympdf.adaptive_learning.processing_rules - INFO - ProcessingRuleManager initialized with 4 rule sets.
2025-06-21 15:37:55,265 - anonympdf.anonympdf.feedback_system - INFO - FeedbackAnalyzer initialized
2025-06-21 15:37:55,265 - anonympdf.anonympdf.feedback_system - INFO - UserFeedbackProcessor initialized
2025-06-21 15:37:55,265 - anonympdf.anonympdf.pattern_learner - INFO - PatternLearner initialized - {'min_confidence': 0.95}
2025-06-21 15:37:55,265 - anonympdf.adaptive_learning.coordinator - INFO - AdaptiveLearningCoordinator initialized.
2025-06-21 15:37:55,266 - anonympdf.pdf - INFO - Initializing PDF processor with Priority 2 enhancements
2025-06-21 15:37:55,266 - anonympdf.pdf - INFO - Configuration manager loaded - {"patterns_count": 38, "cities_count": 81}
2025-06-21 15:37:55,283 - config_manager - INFO - Patterns loaded and compiled from file - {"file": "config\\patterns.yaml", "patterns_count": 39}
2025-06-21 15:37:55,295 - config_manager - INFO - Cities loaded from file - {"file": "config\\cities.yaml", "cities_count": 79}
2025-06-21 15:37:55,313 - config_manager - INFO - Settings loaded from file - {"file": "config\\settings.yaml"}
2025-06-21 15:37:55,351 - config_manager - INFO - Brand names loaded from file - {"file": "config\\brand_names.yaml", "count": 0}
2025-06-21 15:37:55,352 - config_manager - INFO - Configuration manager initialized - {"config_dir": "config", "patterns_count": 39, "cities_count": 79}
2025-06-21 15:37:55,352 - anonympdf.pdf - INFO - Priority 2 context-aware components initialized
2025-06-21 15:37:56,024 - anonympdf.pdf - INFO - English spaCy model loaded successfully - {"model": "en_core_web_sm", "components": 6, "method": "standard"}
2025-06-21 15:37:56,770 - anonympdf.pdf - INFO - Lithuanian spaCy model loaded successfully - {"model": "lt_core_news_sm", "components": 7, "method": "standard"}
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-21 15:37:56,954 - anonympdf.performance - INFO - Performance tracking: text_extraction - {"duration": 0.10100221633911133, "memory_delta": 0.71484375}
2025-06-21 15:37:57,583 - anonympdf.pdf - INFO - Language detected - {"language": "pt", "sample_length": 46}
2025-06-21 15:37:57,585 - anonympdf.adaptive_pattern_db - INFO - Retrieved 0 active patterns from the database.
2025-06-21 15:37:57,585 - anonympdf.pdf - INFO - Using English NLP model for processing - {"language": "pt"}
2025-06-21 15:37:57,594 - anonympdf.performance - INFO - Performance tracking: pii_detection - {"duration": 0.01010274887084961, "memory_delta": 0.01171875}
2025-06-21 15:37:57,623 - anonympdf.pdf - INFO - PDF anonymized successfully - {"input_file": "test.pdf", "output_file": "test_redacted_20250621_153756.pdf", "redactions_applied": 3}
2025-06-21 15:37:57,623 - anonympdf.pdf - INFO - Redaction report generated - {"total_redactions": 3, "language": "pt"}
2025-06-21 15:37:57,626 - anonympdf.performance - INFO - File processing completed: pdf_processing - {"file_size_mb": 0.000774383544921875, "duration": 0.7741825580596924, "throughput": 0.0010002596117157255, "memory_delta": -26.7578125}
___________________________________________________________________ TestPDFProcessorIntegration.test_anonymize_pdf_flow ____________________________________________________________________
tests\test_pdf_processor.py:195: in test_anonymize_pdf_flow
    assert len(list(page.annots(types=[fitz.PDF_ANNOT_SQUARE]))) > 0, "No redaction annotations found."
E   AssertionError: No redaction annotations found.
E   assert 0 > 0
E    +  where 0 = len([])
E    +    where [] = list(<generator object Page.annots at 0x00000154BD7F7040>)
E    +      where <generator object Page.annots at 0x00000154BD7F7040> = <bound method Page.annots of page 0 of C:\Users\tomas\AppData\Local\Temp\pytest-of-tomas\pytest-279\test_anonymize_pdf_flow0\anonymized_output.pdf>(types=[4])
E    +        where <bound method Page.annots of page 0 of C:\Users\tomas\AppData\Local\Temp\pytest-of-tomas\pytest-279\test_anonymize_pdf_flow0\anonymized_output.pdf> = page 0 of C:\Users\tomas\AppData\Local\Temp\pytest-of-tomas\pytest-279\test_anonymize_pdf_flow0\anonymized_output.pdf.annots
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-21 15:38:05,133 - anonympdf.adaptive_pattern_db - INFO - Table 'adaptive_patterns' is ready.
2025-06-21 15:38:05,133 - anonympdf.adaptive_pattern_db - INFO - AdaptivePatternDB initialized (manages session: False).
2025-06-21 15:38:05,177 - anonympdf.adaptive_learning.processing_rules - INFO - Successfully loaded 4 rule sets from config\processing_rules.yaml
2025-06-21 15:38:05,178 - anonympdf.adaptive_learning.processing_rules - INFO - ProcessingRuleManager initialized with 4 rule sets.
2025-06-21 15:38:05,178 - anonympdf.adaptive_learning.doc_classifier - INFO - DocumentClassifier initialized.
2025-06-21 15:38:05,211 - anonympdf.adaptive_learning.processing_rules - INFO - Successfully loaded 4 rule sets from config\processing_rules.yaml
2025-06-21 15:38:05,211 - anonympdf.adaptive_learning.processing_rules - INFO - ProcessingRuleManager initialized with 4 rule sets.
2025-06-21 15:38:11,001 - anonympdf.anonympdf.feedback_system - INFO - FeedbackAnalyzer initialized
2025-06-21 15:38:11,002 - anonympdf.anonympdf.feedback_system - INFO - UserFeedbackProcessor initialized
2025-06-21 15:38:11,002 - anonympdf.anonympdf.pattern_learner - INFO - PatternLearner initialized - {'min_confidence': 0.95}
2025-06-21 15:38:11,002 - anonympdf.adaptive_learning.coordinator - INFO - AdaptiveLearningCoordinator initialized.
2025-06-21 15:38:11,002 - anonympdf.pdf - INFO - Initializing PDF processor with Priority 2 enhancements
2025-06-21 15:38:11,002 - anonympdf.pdf - INFO - Configuration manager loaded - {"patterns_count": 38, "cities_count": 81}
2025-06-21 15:38:11,070 - config_manager - INFO - Patterns loaded and compiled from file - {"file": "config\\patterns.yaml", "patterns_count": 39}
2025-06-21 15:38:11,102 - config_manager - INFO - Cities loaded from file - {"file": "config\\cities.yaml", "cities_count": 79}
2025-06-21 15:38:11,158 - config_manager - INFO - Settings loaded from file - {"file": "config\\settings.yaml"}
2025-06-21 15:38:11,257 - config_manager - INFO - Brand names loaded from file - {"file": "config\\brand_names.yaml", "count": 0}
2025-06-21 15:38:11,257 - config_manager - INFO - Configuration manager initialized - {"config_dir": "config", "patterns_count": 39, "cities_count": 79}
2025-06-21 15:38:11,257 - anonympdf.pdf - INFO - Priority 2 context-aware components initialized
2025-06-21 15:38:12,004 - anonympdf.pdf - INFO - English spaCy model loaded successfully - {"model": "en_core_web_sm", "components": 6, "method": "standard"}
2025-06-21 15:38:12,761 - anonympdf.pdf - INFO - Lithuanian spaCy model loaded successfully - {"model": "lt_core_news_sm", "components": 7, "method": "standard"}
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-21 15:38:12,794 - anonympdf.performance - INFO - Performance tracking: text_extraction - {"duration": 0.02559041976928711, "memory_delta": 0.04296875}
2025-06-21 15:38:12,811 - anonympdf.pdf - INFO - Language detected - {"language": "en", "sample_length": 65}
2025-06-21 15:38:12,812 - anonympdf.adaptive_pattern_db - INFO - Retrieved 0 active patterns from the database.
2025-06-21 15:38:12,812 - anonympdf.pdf - INFO - Using English NLP model for processing - {"language": "en"}
2025-06-21 15:38:12,823 - anonympdf.performance - INFO - Performance tracking: pii_detection - {"duration": 0.010973691940307617, "memory_delta": 0.015625}
2025-06-21 15:38:12,829 - anonympdf.pdf - INFO - PDF anonymized successfully - {"input_file": "simple_pii_document.pdf", "output_file": "anonymized_output.pdf", "redactions_applied": 3}
2025-06-21 15:38:12,830 - anonympdf.pdf - INFO - Redaction report generated - {"total_redactions": 3, "language": "en"}
_______________________________________________________________ TestAdvancedPatternRefinement.test_enhanced_email_detection ________________________________________________________________
tests\test_priority2_enhancements.py:135: in test_enhanced_email_detection
    assert len(email_detections) == 1
E   assert 0 == 1
E    +  where 0 = len([])
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-21 15:38:22,381 - config_manager - INFO - Patterns loaded and compiled from file - {"file": "config\\patterns.yaml", "patterns_count": 39}
2025-06-21 15:38:22,392 - config_manager - INFO - Cities loaded from file - {"file": "config\\cities.yaml", "cities_count": 79}
2025-06-21 15:38:22,414 - config_manager - INFO - Settings loaded from file - {"file": "config\\settings.yaml"}
2025-06-21 15:38:22,564 - config_manager - INFO - Brand names loaded from file - {"file": "config\\brand_names.yaml", "count": 0}
2025-06-21 15:38:22,564 - config_manager - INFO - Configuration manager initialized - {"config_dir": "config", "patterns_count": 39, "cities_count": 79}
___________________________________________________________ TestAdvancedPatternRefinement.test_enhanced_personal_code_detection ____________________________________________________________
tests\test_priority2_enhancements.py:144: in test_enhanced_personal_code_detection
    assert len(code_detections) == 1
E   assert 0 == 1
E    +  where 0 = len([])
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-21 15:38:22,625 - config_manager - INFO - Patterns loaded and compiled from file - {"file": "config\\patterns.yaml", "patterns_count": 39}
2025-06-21 15:38:22,650 - config_manager - INFO - Cities loaded from file - {"file": "config\\cities.yaml", "cities_count": 79}
2025-06-21 15:38:22,731 - config_manager - INFO - Settings loaded from file - {"file": "config\\settings.yaml"}
2025-06-21 15:38:22,826 - config_manager - INFO - Brand names loaded from file - {"file": "config\\brand_names.yaml", "count": 0}
2025-06-21 15:38:22,827 - config_manager - INFO - Configuration manager initialized - {"config_dir": "config", "patterns_count": 39, "cities_count": 79}
_______________________________________________________________ TestDiscoverAndValidatePatterns.test_low_precision_filtered ________________________________________________________________
tests\adaptive\test_pattern_learner.py:92: in test_low_precision_filtered
    assert patterns == []
E   AssertionError: assert [AdaptivePatt...9, 8, 52529))] == []
E     Left contains one more item: AdaptivePattern(pattern_id='p_-2170871003243851998', regex='\\bABC\\-123\\b', pii_category='CODE', confidence=1.0, pos...t=datetime.datetime(2025, 6, 21, 15, 39, 8, 52529), last_validated_at=datetime.datetime(2025, 6, 21, 15, 39, 8, 52529))
E     Use -v to get more diff
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-21 15:39:08,050 - anonympdf.anonympdf.feedback_system - INFO - FeedbackAnalyzer initialized
2025-06-21 15:39:08,051 - anonympdf.anonympdf.feedback_system - INFO - UserFeedbackProcessor initialized
2025-06-21 15:39:08,051 - anonympdf.anonympdf.pattern_learner - INFO - PatternLearner initialized - {'min_confidence': 0.8}
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-21 15:39:08,052 - anonympdf.anonympdf.pattern_learner - INFO - Discovered and validated new pattern: \bABC\-123\b - {'precision': '1.00', 'recall': '1.00'}
________________________________________________________________ TestDiscoverAndValidatePatterns.test_insufficient_samples _________________________________________________________________
tests\adaptive\test_pattern_learner.py:101: in test_insufficient_samples
    assert patterns == []
E   AssertionError: assert [AdaptivePatt..., 13, 21652))] == []
E     Left contains one more item: AdaptivePattern(pattern_id='p_-1339948285663326990', regex='\\b999\\-0000\\b', pii_category='PHONE', confidence=1.0, p...datetime.datetime(2025, 6, 21, 15, 39, 13, 21652), last_validated_at=datetime.datetime(2025, 6, 21, 15, 39, 13, 21652))
E     Use -v to get more diff
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-21 15:39:13,019 - anonympdf.anonympdf.feedback_system - INFO - FeedbackAnalyzer initialized
2025-06-21 15:39:13,019 - anonympdf.anonympdf.feedback_system - INFO - UserFeedbackProcessor initialized
2025-06-21 15:39:13,019 - anonympdf.anonympdf.pattern_learner - INFO - PatternLearner initialized - {'min_confidence': 0.8}
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-21 15:39:13,021 - anonympdf.anonympdf.pattern_learner - INFO - Discovered and validated new pattern: \b999\-0000\b - {'precision': '1.00', 'recall': '1.00'}
________________________________________________________________________________ test_monitoring_end_to_end ________________________________________________________________________________
tests\system\test_real_time_monitor_integration.py:57: in test_monitoring_end_to_end
    assert len(logged_metrics) > 0, "No metrics were logged to the real-time monitor database."
E   AssertionError: No metrics were logged to the real-time monitor database.
E   assert 0 > 0
E    +  where 0 = len([])
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-21 15:40:04,561 - anonympdf.adaptive_pattern_db - INFO - Table 'adaptive_patterns' is ready.
2025-06-21 15:40:04,562 - anonympdf.adaptive_pattern_db - INFO - AdaptivePatternDB initialized (manages session: False).
2025-06-21 15:40:04,582 - anonympdf.adaptive_learning.processing_rules - INFO - Successfully loaded 4 rule sets from config\processing_rules.yaml
2025-06-21 15:40:04,582 - anonympdf.adaptive_learning.processing_rules - INFO - ProcessingRuleManager initialized with 4 rule sets.
2025-06-21 15:40:04,582 - anonympdf.adaptive_learning.doc_classifier - INFO - DocumentClassifier initialized.
2025-06-21 15:40:04,599 - anonympdf.adaptive_learning.processing_rules - INFO - Successfully loaded 4 rule sets from config\processing_rules.yaml
2025-06-21 15:40:04,599 - anonympdf.adaptive_learning.processing_rules - INFO - ProcessingRuleManager initialized with 4 rule sets.
2025-06-21 15:40:11,864 - anonympdf.anonympdf.feedback_system - INFO - FeedbackAnalyzer initialized
2025-06-21 15:40:11,865 - anonympdf.anonympdf.feedback_system - INFO - UserFeedbackProcessor initialized
2025-06-21 15:40:11,865 - anonympdf.anonympdf.pattern_learner - INFO - PatternLearner initialized - {'min_confidence': 0.95}
2025-06-21 15:40:11,865 - anonympdf.adaptive_learning.coordinator - INFO - AdaptiveLearningCoordinator initialized.
2025-06-21 15:40:11,865 - anonympdf.pdf - INFO - Initializing PDF processor with Priority 2 enhancements
2025-06-21 15:40:11,865 - anonympdf.pdf - INFO - Configuration manager loaded - {"patterns_count": 38, "cities_count": 81}
2025-06-21 15:40:11,883 - config_manager - INFO - Patterns loaded and compiled from file - {"file": "config\\patterns.yaml", "patterns_count": 39}
2025-06-21 15:40:11,895 - config_manager - INFO - Cities loaded from file - {"file": "config\\cities.yaml", "cities_count": 79}
2025-06-21 15:40:11,916 - config_manager - INFO - Settings loaded from file - {"file": "config\\settings.yaml"}
2025-06-21 15:40:11,956 - config_manager - INFO - Brand names loaded from file - {"file": "config\\brand_names.yaml", "count": 0}
2025-06-21 15:40:11,956 - config_manager - INFO - Configuration manager initialized - {"config_dir": "config", "patterns_count": 39, "cities_count": 79}
2025-06-21 15:40:11,957 - anonympdf.pdf - INFO - Priority 2 context-aware components initialized
2025-06-21 15:40:12,630 - anonympdf.pdf - INFO - English spaCy model loaded successfully - {"model": "en_core_web_sm", "components": 6, "method": "standard"}
2025-06-21 15:40:13,640 - anonympdf.pdf - INFO - Lithuanian spaCy model loaded successfully - {"model": "lt_core_news_sm", "components": 7, "method": "standard"}
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-21 15:40:13,669 - anonympdf.pdf - ERROR - Failed to anonymize PDF - {"file": "simple_pii_document.txt", "error": "Logger._log() got an unexpected keyword argument 'error'", "exc_info": true}
2025-06-21 15:40:13,672 - anonympdf.performance - INFO - File processing completed: pdf_processing - {"file_size_mb": 0.0002422332763671875, "duration": 0.026478290557861328, "throughput": 0.009148372922256839, "memory_delta": -0.4140625}
------------------------------------------------------------------------------------ Captured log call -------------------------------------------------------------------------------------
INFO     app.core.text_extraction:text_extraction.py:50 Starting robust text extraction
--------------------------------------------------------------------------------- Captured stderr teardown ---------------------------------------------------------------------------------
2025-06-21 15:40:13,683 - anonympdf.ab_testing - INFO - Database connection to C:\Users\tomas\AppData\Local\Temp\pytest-of-tomas\pytest-279\ab_test_data0\ab_tests.db closed.
===================================================================================== warnings summary =====================================================================================
tests/adaptive/test_ab_testing.py::TestABTestManager::test_record_and_evaluate_metrics_variant_wins
  C:\Users\tomas\Desktop\0001 DUOMENU ANALITIKA\038_AnonymPDF\venv\Lib\site-packages\scipy\stats\_axis_nan_policy.py:586: RuntimeWarning: Precision loss occurred in moment calculation due to catastrophic cancellation. This occurs when the data are nearly identical. Results may be unreliable.
    res = hypotest_fun_out(*samples, **kwds)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html

---------- coverage: platform win32, python 3.11.9-final-0 -----------
Name                                    Stmts   Miss  Cover   Missing
---------------------------------------------------------------------
app\__init__.py                             0      0   100%
app\api\__init__.py                         0      0   100%
app\api\endpoints\__init__.py               0      0   100%
app\api\endpoints\analytics.py            258     59    77%   32-35, 40-43, 48-51, 56-59, 192-194, 230-232, 250-252, 286-288, 304-306, 357-359, 389-391, 420-423, 446-448, 458-460, 467, 500-503, 561-566, 597, 600-603
app\api\endpoints\feedback.py              48     26    46%   41-92
app\api\endpoints\monitoring.py            10      2    80%   14, 21
app\api\endpoints\pdf.py                  101     44    56%   27, 62-64, 106-107, 113-124, 130-163, 171, 176-182, 188-201
app\core\__init__.py                        0      0   100%
app\core\adaptive\__init__.py               0      0   100%
app\core\adaptive\ab_testing.py           152     11    93%   183, 220-221, 257, 336-343
app\core\adaptive\coordinator.py          132     48    64%   26-33, 57-65, 128, 177-178, 193, 217, 221-222, 226-227, 238-257, 261-263, 274-290
app\core\adaptive\doc_classifier.py        44      1    98%   84
app\core\adaptive\online_learner.py        31      5    84%   45-46, 66-68
app\core\adaptive\pattern_db.py           136     46    66%   49-53, 85-92, 121-123, 127-129, 146-147, 203-206, 222-223, 244-249, 253, 260-266, 276-283
app\core\adaptive\pattern_learner.py       63      6    90%   20, 61, 101-106, 128
app\core\adaptive\processing_rules.py      54      7    87%   82-89, 94
app\core\analytics_engine.py              214     46    79%   102-104, 195-196, 222-227, 231-256, 260-275, 288-289, 318-320, 340-353, 398-401, 405, 409-411, 416
app\core\config_manager.py                262    125    52%   60-61, 78-79, 132-138, 155-156, 162-163, 263-267, 379, 441-443, 465-467, 476-478, 482-493, 497-512, 516-540, 544-584, 588-663, 667
app\core\context_analyzer.py              204     17    92%   57, 72, 77-79, 85, 199-205, 332-333, 446, 453, 456, 487, 489, 545-546
app\core\data_models.py                    45      9    80%   47-51, 56-59
app\core\dependencies.py                  150     76    49%   29-31, 58-60, 88-90, 113-114, 116, 123, 129-151, 155-187, 201-207, 216-231, 238-243, 254-263, 269-280
app\core\factory.py                        47      0   100%
app\core\feature_engineering.py           332     80    76%   21, 70, 75, 100, 131, 138-143, 159, 200, 238-239, 243-256, 278-279, 287, 314-315, 333, 340-341, 359, 393-399, 419, 482, 496, 511-521, 527, 534-536, 540, 546, 562-576, 652-653, 657-660, 695-715, 720-729
app\core\feedback_system.py               272    103    62%   27-28, 101-115, 131-166, 178-221, 254-258, 271-272, 281-282, 287, 290, 305, 349-358, 361, 398-400, 407-409, 414, 422-427, 433-436, 469-473, 481, 511-513, 538-556, 560-567
app\core\intelligent_cache.py             373     31    92%   114-115, 135-141, 333-340, 359-360, 396, 413, 443, 445, 460-461, 490, 525-526, 546, 582-583, 596-600, 625-626, 670, 708
app\core\lithuanian_enhancements.py       124     16    87%   277, 323, 341-342, 360-361, 364-365, 368-369, 394-395, 465, 503-505
app\core\logging.py                       110     23    79%   44-55, 59-71, 87, 196-216
app\core\memory_optimizer.py              297     51    83%   91-97, 102, 144, 241-242, 297, 329, 337, 351-356, 373-375, 421, 445, 460-476, 484-485, 525-563, 571-573, 585-586, 606-607
app\core\memory_utils.py                   23      9    61%   15, 20, 25, 30, 42-44, 49-50
app\core\ml_engine.py                     244    153    37%   33, 53-74, 83, 86, 89-90, 96-98, 102-130, 175-179, 183-209, 217, 221, 234-238, 265-322, 331-339, 345-356, 360-374, 386-451, 456-472, 476-481, 499-523
app\core\ml_integration.py                202     85    58%   20, 60, 75, 114-117, 166-168, 176-177, 181-183, 190-233, 239-261, 265-269, 277, 296, 308-352, 404-426, 430-446, 458-460, 464-466, 470-471, 477
app\core\ml_monitoring.py                 280    166    41%   39-56, 73, 114-124, 128-179, 248-251, 255-289, 293-313, 317-334, 338-386, 453-466, 470-475, 479-502, 506-507, 525-548, 552-567, 571-580, 586, 590, 594-618, 622, 626, 630-631, 635-637, 641-645, 651
app\core\ml_training_pipeline.py          147     82    44%   65-67, 82, 89-93, 107-132, 136, 140-145, 152, 166-198, 208-213, 227-244, 251-254, 258-275, 280
app\core\nlp_loader.py                     19     19     0%   1-36
app\core\performance.py                   191     19    90%   93, 153, 188, 220, 271-279, 314, 329-330, 336-340, 365, 369
app\core\performance_optimizer.py         393     99    75%   98-106, 118, 122-123, 172, 176-177, 213, 235, 256-319, 336, 389-395, 416-417, 450-451, 486-489, 570-571, 588-589, 610-616, 632-633, 686, 708-719, 728-766, 807-837, 841-843, 847-863, 877
app\core\real_time_monitor.py             310    174    44%   72, 108-110, 145-147, 166-168, 224-225, 239-251, 293-326, 330-336, 340-345, 349-381, 393-453, 457-525, 529-530, 534-538, 542-549, 553-556, 560-563, 571-582, 586-600, 604-641, 645-650, 654-655, 659-660
app\core\salutation_detector.py           143    113    21%   38-40, 44, 89, 100, 117-140, 144-185, 195-231, 236-252, 256-267, 272-304, 308-333, 341-354, 361-390
app\core\text_extraction.py               120     13    89%   89, 125-127, 164-166, 173-175, 291, 301, 308
app\core\training_data.py                 305    139    54%   43, 68-70, 82, 103-104, 109, 130-131, 138, 174-175, 182, 224-226, 254-271, 275-280, 292-333, 345-383, 432-452, 456-508, 513-530, 534-568, 572-620, 658-665, 704, 745-778, 784
app\core\validation_utils.py              188     38    80%   123-127, 137, 170-171, 186, 202, 208-213, 219-225, 241-250, 270, 275-280, 303-307, 311-315, 360-361, 366-367, 377-378, 490-499
app\database.py                            12      0   100%
app\db\migrations.py                      100     46    54%   26, 48-112, 130-131, 136-138, 160-165, 169-185, 196-197
app\dependencies.py                        25      8    68%   20, 26, 35-36, 41-45
app\main.py                                82     41    50%   26-27, 31-33, 39-50, 81-84, 90-91, 97, 102, 107, 120-153
app\models\pdf_document.py                 21      0   100%
app\pdf_processor.py                       19     13    32%   19-33
app\schemas\pdf.py                         18      0   100%
app\services\__init__.py                    0      0   100%
app\services\pdf_processor.py             272    104    62%   79, 104-166, 170-174, 187-189, 223, 289-290, 306-324, 349-353, 371-380, 389-422, 428-432, 446, 454-459, 534, 565-571, 587-591, 605-613
app\version.py                              1      0   100%
app\worker.py                              56     38    32%   43-53, 61-113
---------------------------------------------------------------------
TOTAL                                    6630   2191    67%

FAIL Required test coverage of 80% not reached. Total coverage: 66.95%
=================================================================================== slowest 10 durations ===================================================================================
9.11s setup    tests/system/test_real_time_monitor_integration.py::test_monitoring_end_to_end
7.67s setup    tests/test_pdf_processor.py::TestPDFProcessorIntegration::test_anonymize_pdf_flow
7.43s setup    tests/test_pdf_processor.py::TestPDFProcessorIntegration::test_process_pdf_failure_on_anonymization_error
7.29s setup    tests/adaptive/test_pattern_learner.py::TestDiscoverAndValidatePatterns::test_low_precision_filtered
7.00s setup    tests/system/test_adaptive_workflow.py::test_adaptive_workflow_learns_new_pattern
6.65s setup    tests/system/test_adaptive_workflow.py::test_fixture_creation
6.63s setup    tests/test_lithuanian_pii.py::TestLithuanianIntegration::test_anti_overredaction_in_technical_context
6.51s setup    tests/system/test_adaptive_workflow.py::test_feedback_learns_and_discovers_new_pattern[MIN-KORT-98765-LT_MINISTRY_CARD-lt]
6.45s setup    tests/system/test_adaptive_workflow.py::test_feedback_learns_and_discovers_new_pattern[EMP-ID-98765-EMPLOYEE_ID-en]
6.39s setup    tests/system/test_adaptive_workflow.py::test_feedback_learns_and_discovers_new_pattern[PROJ-SECRET-ALPHA-PROJECT_CODE-en]
================================================================================= short test summary info ==================================================================================
SKIPPED [3] tests\test_pdf_processor.py: Bypassing persistent mock/environment error to focus on logic failures.
FAILED tests/test_lithuanian_pii.py::TestLithuanianIntegration::test_simple_lithuanian_names_detection - AssertionError: assert 'Linas Vaitkus' in set()
FAILED tests/test_lithuanian_pii.py::TestLithuanianIntegration::test_anti_overredaction_in_technical_context - AssertionError: assert 'Vilniaus' in set()
FAILED tests/test_lithuanian_pii.py::TestLithuanianIntegration::test_anti_overredaction_of_common_words - AssertionError: assert '+370 699 99999' in ['Jonas Petraitis', '99999']
FAILED tests/test_lithuanian_pii.py::TestLithuanianIntegration::test_redaction_report_generation - AssertionError: assert '+370 699 99999' in ['Jonas Petraitis', '99999']
FAILED tests/test_pdf_processor.py::TestPDFProcessorIntegration::test_process_pdf_success - AssertionError: assert None == 1
FAILED tests/test_pdf_processor.py::TestPDFProcessorIntegration::test_anonymize_pdf_flow - AssertionError: No redaction annotations found.
FAILED tests/test_priority2_enhancements.py::TestAdvancedPatternRefinement::test_enhanced_email_detection - assert 0 == 1
FAILED tests/test_priority2_enhancements.py::TestAdvancedPatternRefinement::test_enhanced_personal_code_detection - assert 0 == 1
FAILED tests/adaptive/test_pattern_learner.py::TestDiscoverAndValidatePatterns::test_low_precision_filtered - AssertionError: assert [AdaptivePatt...9, 8, 52529))] == []
FAILED tests/adaptive/test_pattern_learner.py::TestDiscoverAndValidatePatterns::test_insufficient_samples - AssertionError: assert [AdaptivePatt..., 13, 21652))] == []
FAILED tests/system/test_real_time_monitor_integration.py::test_monitoring_end_to_end - AssertionError: No metrics were logged to the real-time monitor database.
============================================================= 11 failed, 258 passed, 3 skipped, 1 warning in 197.43s (0:03:17) =============================================================
(venv) PS C:\Users\tomas\Desktop\0001 DUOMENU ANALITIKA\038_AnonymPDF>