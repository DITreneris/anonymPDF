(venv) PS C:\Users\tomas\Desktop\0001 DUOMENU ANALITIKA\038_AnonymPDF> pytest
=================================================================================== test session starts ====================================================================================
platform win32 -- Python 3.11.9, pytest-7.4.3, pluggy-1.6.0
benchmark: 4.0.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: C:\Users\tomas\Desktop\0001 DUOMENU ANALITIKA\038_AnonymPDF
configfile: pytest.ini
testpaths: tests
plugins: anyio-3.7.1, hypothesis-6.92.1, asyncio-0.21.1, benchmark-4.0.0, cov-4.1.0, mock-3.12.0
asyncio: mode=Mode.STRICT
collected 358 items / 1 error

========================================================================================== ERRORS ==========================================================================================
_________________________________________________________________ ERROR collecting tests/adaptive/test_pattern_learner.py __________________________________________________________________
venv\Lib\site-packages\_pytest\python.py:617: in _importtestmodule
    mod = import_path(self.path, mode=importmode, root=self.config.rootpath)
venv\Lib\site-packages\_pytest\pathlib.py:567: in import_path
    importlib.import_module(module_name)
..\..\..\AppData\Local\Programs\Python\Python311\Lib\importlib\__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
<frozen importlib._bootstrap>:1204: in _gcd_import
    ???
<frozen importlib._bootstrap>:1176: in _find_and_load
    ???
<frozen importlib._bootstrap>:1147: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:690: in _load_unlocked
    ???
venv\Lib\site-packages\_pytest\assertion\rewrite.py:177: in exec_module
    source_stat, co = _rewrite_test(fn, self.config)
venv\Lib\site-packages\_pytest\assertion\rewrite.py:359: in _rewrite_test
    tree = ast.parse(source, filename=strfn)
..\..\..\AppData\Local\Programs\Python\Python311\Lib\ast.py:50: in parse
    return compile(source, filename, mode, flags,
E     File "C:\Users\tomas\Desktop\0001 DUOMENU ANALITIKA\038_AnonymPDF\tests\adaptive\test_pattern_learner.py", line 28
E       """
E       ^^^^
E   IndentationError: expected an indented block after function definition on line 27
================================================================================= short test summary info ==================================================================================
ERROR tests/adaptive/test_pattern_learner.py
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
==================================================================================== 1 error in 10.00s =====================================================================================
(venv) PS C:\Users\tomas\Desktop\0001 DUOMENU ANALITIKA\038_AnonymPDF> pytest
=================================================================================== test session starts ====================================================================================
platform win32 -- Python 3.11.9, pytest-7.4.3, pluggy-1.6.0
benchmark: 4.0.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: C:\Users\tomas\Desktop\0001 DUOMENU ANALITIKA\038_AnonymPDF
configfile: pytest.ini
testpaths: tests
plugins: anyio-3.7.1, hypothesis-6.92.1, asyncio-0.21.1, benchmark-4.0.0, cov-4.1.0, mock-3.12.0
asyncio: mode=Mode.STRICT
collected 360 items

tests\test_analytics_api.py .......................                                                                                                                                   [  6%]
tests\test_analytics_engine.py .FE.F.F                                                                                                                                                [  8%]
tests\test_config_manager.py ...F.........                                                                                                                                            [ 11%]
tests\test_feedback_system.py ...................F.                                                                                                                                   [ 17%]
tests\test_intelligent_cache.py ....................F.......F                                                                                                                         [ 25%]
tests\test_memory_optimizer.py ..............................F                                                                                                                        [ 34%]
tests\test_ml_integration_layer.py EEEEEEEEF                                                                                                                                          [ 36%]
tests\test_morning_ses5_improvements.py EEEEEEE..F..EE                                                                                                                                [ 40%]
tests\test_pdf_processor.py .FFF                                                                                                                                                      [ 41%]
tests\test_performance.py ............F.                                                                                                                                              [ 45%]
tests\test_performance_enhanced.py .............EEEEE....FFFFFF                                                                                                                       [ 53%]
tests\test_performance_optimizer.py ..........EEEE...FFFF                                                                                                                             [ 59%]
tests\test_pii_patterns.py .............                                                                                                                                              [ 62%]
tests\test_priority2_enhancements.py .............................                                                                                                                    [ 70%]
tests\test_real_time_monitor.py .........F........F....F.......                                                                                                                       [ 79%]
tests\test_training_data_collector.py .FF.....F                                                                                                                                       [ 81%]
tests\test_validation_utils.py ...F..................                                                                                                                                 [ 88%]
tests\adaptive\test_ab_testing.py ......F.                                                                                                                                            [ 90%]
tests\adaptive\test_coordinator.py EEEEEE                                                                                                                                             [ 91%]
tests\adaptive\test_doc_classifier.py ........                                                                                                                                        [ 94%]
tests\adaptive\test_online_learner.py ....FF                                                                                                                                          [ 95%]
tests\adaptive\test_pattern_db.py ......                                                                                                                                              [ 97%]
tests\adaptive\test_pattern_learner.py .F                                                                                                                                             [ 98%]
tests\adaptive\test_processing_rules.py ....                                                                                                                                          [ 99%]
tests\system\test_adaptive_workflow.py EEE                                                                                                                                            [100%]

========================================================================================== ERRORS ==========================================================================================
___________________________________________________________ ERROR at teardown of TestQualityAnalyzer.test_add_detection_results ____________________________________________________________
tests\test_analytics_engine.py:21: in temp_db
    shutil.rmtree(temp_dir)
..\..\..\AppData\Local\Programs\Python\Python311\Lib\shutil.py:787: in rmtree
    return _rmtree_unsafe(path, onerror)
..\..\..\AppData\Local\Programs\Python\Python311\Lib\shutil.py:634: in _rmtree_unsafe
    onerror(os.unlink, fullname, sys.exc_info())
..\..\..\AppData\Local\Programs\Python\Python311\Lib\shutil.py:632: in _rmtree_unsafe
    os.unlink(fullname)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\tomas\\AppData\\Local\\Temp\\tmpwlrru4lm\\analytics_test.db'
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:00:10,255 - anonympdf.ml_monitoring - INFO - ML Performance Monitor initialized
2025-06-12 20:00:10,255 - anonympdf.anonympdf.analytics - INFO - QualityAnalyzer initialized - {"extra": {"db_path": "C:\\Users\\tomas\\AppData\\Local\\Temp\\tmpwlrru4lm\\analytics_test.db"}}
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-12 20:00:10,255 - anonympdf.anonympdf.analytics - ERROR - Error adding detection results: no such table: detection_results
________________________________________________ ERROR at setup of TestMLIntegrationLayerFeedback.test_add_user_feedback_confirmed_correct _________________________________________________
tests\test_ml_integration_layer.py:85: in sample_detection_result
    ml_prediction = MLPrediction(
E   TypeError: MLPrediction.__init__() got an unexpected keyword argument 'probability'
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:00:59,317 - anonympdf.ml_integration - INFO - ML Integration Layer initialized
__________________________________________________ ERROR at setup of TestMLIntegrationLayerFeedback.test_add_user_feedback_false_positive __________________________________________________
tests\test_ml_integration_layer.py:85: in sample_detection_result
    ml_prediction = MLPrediction(
E   TypeError: MLPrediction.__init__() got an unexpected keyword argument 'probability'
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:00:59,333 - anonympdf.ml_integration - INFO - ML Integration Layer initialized
_______________________________________________ ERROR at setup of TestMLIntegrationLayerFeedback.test_add_user_feedback_category_correction ________________________________________________
tests\test_ml_integration_layer.py:85: in sample_detection_result
    ml_prediction = MLPrediction(
E   TypeError: MLPrediction.__init__() got an unexpected keyword argument 'probability'
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:00:59,348 - anonympdf.ml_integration - INFO - ML Integration Layer initialized
_________________________________________________ ERROR at setup of TestMLIntegrationLayerFeedback.test_add_user_feedback_context_details __________________________________________________
tests\test_ml_integration_layer.py:85: in sample_detection_result
    ml_prediction = MLPrediction(
E   TypeError: MLPrediction.__init__() got an unexpected keyword argument 'probability'
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:00:59,379 - anonympdf.ml_integration - INFO - ML Integration Layer initialized
___________________________________________________ ERROR at setup of TestMLIntegrationLayerFeedback.test_add_user_feedback_handles_uuid ___________________________________________________
tests\test_ml_integration_layer.py:85: in sample_detection_result
    ml_prediction = MLPrediction(
E   TypeError: MLPrediction.__init__() got an unexpected keyword argument 'probability'
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:00:59,394 - anonympdf.ml_integration - INFO - ML Integration Layer initialized
_______________________________________ ERROR at setup of TestMLIntegrationLayerFeedback.test_add_user_feedback_handles_user_feedback_system_failure _______________________________________
tests\test_ml_integration_layer.py:85: in sample_detection_result
    ml_prediction = MLPrediction(
E   TypeError: MLPrediction.__init__() got an unexpected keyword argument 'probability'
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:00:59,410 - anonympdf.ml_integration - INFO - ML Integration Layer initialized
____________________________________ ERROR at setup of TestMLIntegrationLayerDetectionProcessing.test_detect_with_ml_integration_calls_quality_analyzer ____________________________________
tests\test_ml_integration_layer.py:85: in sample_detection_result
    ml_prediction = MLPrediction(
E   TypeError: MLPrediction.__init__() got an unexpected keyword argument 'probability'
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:00:59,426 - anonympdf.ml_integration - INFO - ML Integration Layer initialized
______________________________ ERROR at setup of TestMLIntegrationLayerDetectionProcessing.test_detect_with_ml_integration_calls_quality_analyzer_on_fallback ______________________________
tests\test_ml_integration_layer.py:85: in sample_detection_result
    ml_prediction = MLPrediction(
E   TypeError: MLPrediction.__init__() got an unexpected keyword argument 'probability'
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:00:59,441 - anonympdf.ml_integration - INFO - ML Integration Layer initialized
___________________________________________________ ERROR at setup of TestMorningSes5Patterns.test_enhanced_car_plate_contextual_pattern ___________________________________________________
tests\test_morning_ses5_improvements.py:16: in pdf_processor
    return PDFProcessor()
E   NameError: name 'PDFProcessor' is not defined
____________________________________________________ ERROR at setup of TestMorningSes5Patterns.test_enhanced_car_plate_enhanced_pattern ____________________________________________________
tests\test_morning_ses5_improvements.py:16: in pdf_processor
    return PDFProcessor()
E   NameError: name 'PDFProcessor' is not defined
_____________________________________________________ ERROR at setup of TestMorningSes5Patterns.test_lithuanian_name_all_caps_pattern ______________________________________________________
tests\test_morning_ses5_improvements.py:16: in pdf_processor
    return PDFProcessor()
E   NameError: name 'PDFProcessor' is not defined
____________________________________________________ ERROR at setup of TestMorningSes5Patterns.test_lithuanian_name_contextual_pattern _____________________________________________________
tests\test_morning_ses5_improvements.py:16: in pdf_processor
    return PDFProcessor()
E   NameError: name 'PDFProcessor' is not defined
__________________________________________________ ERROR at setup of TestMorningSes5Patterns.test_lithuanian_name_contextual_caps_pattern __________________________________________________
tests\test_morning_ses5_improvements.py:16: in pdf_processor
    return PDFProcessor()
E   NameError: name 'PDFProcessor' is not defined
____________________________________________________ ERROR at setup of TestMorningSes5Patterns.test_lithuanian_address_flexible_pattern ____________________________________________________
tests\test_morning_ses5_improvements.py:16: in pdf_processor
    return PDFProcessor()
E   NameError: name 'PDFProcessor' is not defined
________________________________________________ ERROR at setup of TestMorningSes5Patterns.test_lithuanian_personal_code_contextual_pattern ________________________________________________
tests\test_morning_ses5_improvements.py:16: in pdf_processor
    return PDFProcessor()
E   NameError: name 'PDFProcessor' is not defined
______________________________________________ ERROR at setup of TestMorningSes5Integration.test_comprehensive_lithuanian_document_processing ______________________________________________
tests\test_morning_ses5_improvements.py:16: in pdf_processor
    return PDFProcessor()
E   NameError: name 'PDFProcessor' is not defined
________________________________________________ ERROR at setup of TestMorningSes5Integration.test_anti_overredaction_in_technical_context _________________________________________________
tests\test_morning_ses5_improvements.py:16: in pdf_processor
    return PDFProcessor()
E   NameError: name 'PDFProcessor' is not defined
____________________________________________________ ERROR at setup of TestPerformanceOptimizedProcessor.test_processor_initialization _____________________________________________________
tests\test_performance_enhanced.py:331: in setup_method
    self.processor = PerformanceOptimizedProcessor()
app\core\performance.py:380: in __init__
    self._load_optimizers()
app\core\performance.py:389: in _load_optimizers
    self._performance_optimizer = get_performance_optimizer()
app\core\performance_optimizer.py:891: in get_performance_optimizer
    _performance_optimizer = PerformanceOptimizer(config=config)
app\core\performance_optimizer.py:668: in __init__
    self.parallel_processor = ParallelProcessor(self.config.get('parallel_processing'))
app\core\performance_optimizer.py:184: in __init__
    self.config = config or get_config()['performance']['parallel_processing']
E   KeyError: 'parallel_processing'
__________________________________________________ ERROR at setup of TestPerformanceOptimizedProcessor.test_optimized_processing_session ___________________________________________________
tests\test_performance_enhanced.py:331: in setup_method
    self.processor = PerformanceOptimizedProcessor()
app\core\performance.py:380: in __init__
    self._load_optimizers()
app\core\performance.py:389: in _load_optimizers
    self._performance_optimizer = get_performance_optimizer()
app\core\performance_optimizer.py:891: in get_performance_optimizer
    _performance_optimizer = PerformanceOptimizer(config=config)
app\core\performance_optimizer.py:668: in __init__
    self.parallel_processor = ParallelProcessor(self.config.get('parallel_processing'))
app\core\performance_optimizer.py:184: in __init__
    self.config = config or get_config()['performance']['parallel_processing']
E   KeyError: 'parallel_processing'
____________________________________________________ ERROR at setup of TestPerformanceOptimizedProcessor.test_parallel_file_processing _____________________________________________________
tests\test_performance_enhanced.py:331: in setup_method
    self.processor = PerformanceOptimizedProcessor()
app\core\performance.py:380: in __init__
    self._load_optimizers()
app\core\performance.py:389: in _load_optimizers
    self._performance_optimizer = get_performance_optimizer()
app\core\performance_optimizer.py:891: in get_performance_optimizer
    _performance_optimizer = PerformanceOptimizer(config=config)
app\core\performance_optimizer.py:668: in __init__
    self.parallel_processor = ParallelProcessor(self.config.get('parallel_processing'))
app\core\performance_optimizer.py:184: in __init__
    self.config = config or get_config()['performance']['parallel_processing']
E   KeyError: 'parallel_processing'
_____________________________________________________ ERROR at setup of TestPerformanceOptimizedProcessor.test_empty_files_processing ______________________________________________________
tests\test_performance_enhanced.py:331: in setup_method
    self.processor = PerformanceOptimizedProcessor()
app\core\performance.py:380: in __init__
    self._load_optimizers()
app\core\performance.py:389: in _load_optimizers
    self._performance_optimizer = get_performance_optimizer()
app\core\performance_optimizer.py:891: in get_performance_optimizer
    _performance_optimizer = PerformanceOptimizer(config=config)
app\core\performance_optimizer.py:668: in __init__
    self.parallel_processor = ParallelProcessor(self.config.get('parallel_processing'))
app\core\performance_optimizer.py:184: in __init__
    self.config = config or get_config()['performance']['parallel_processing']
E   KeyError: 'parallel_processing'
_______________________________________________ ERROR at setup of TestPerformanceOptimizedProcessor.test_single_file_processing_with_caching _______________________________________________
tests\test_performance_enhanced.py:331: in setup_method
    self.processor = PerformanceOptimizedProcessor()
app\core\performance.py:380: in __init__
    self._load_optimizers()
app\core\performance.py:389: in _load_optimizers
    self._performance_optimizer = get_performance_optimizer()
app\core\performance_optimizer.py:891: in get_performance_optimizer
    _performance_optimizer = PerformanceOptimizer(config=config)
app\core\performance_optimizer.py:668: in __init__
    self.parallel_processor = ParallelProcessor(self.config.get('parallel_processing'))
app\core\performance_optimizer.py:184: in __init__
    self.config = config or get_config()['performance']['parallel_processing']
E   KeyError: 'parallel_processing'
___________________________________________________________________ ERROR at setup of TestBatchEngine.test_submit_batch ____________________________________________________________________
tests\test_performance_optimizer.py:215: in setup_method
    self.batch_engine = BatchEngine(config=config)
app\core\performance_optimizer.py:524: in __init__
    self.parallel_processor = ParallelProcessor(self.config.get('parallel_processing'))
app\core\performance_optimizer.py:184: in __init__
    self.config = config or get_config()['performance']['parallel_processing']
E   KeyError: 'parallel_processing'
________________________________________________________________ ERROR at setup of TestBatchEngine.test_process_next_batch _________________________________________________________________
tests\test_performance_optimizer.py:215: in setup_method
    self.batch_engine = BatchEngine(config=config)
app\core\performance_optimizer.py:524: in __init__
    self.parallel_processor = ParallelProcessor(self.config.get('parallel_processing'))
app\core\performance_optimizer.py:184: in __init__
    self.config = config or get_config()['performance']['parallel_processing']
E   KeyError: 'parallel_processing'
__________________________________________________________________ ERROR at setup of TestBatchEngine.test_get_queue_stats __________________________________________________________________
tests\test_performance_optimizer.py:215: in setup_method
    self.batch_engine = BatchEngine(config=config)
app\core\performance_optimizer.py:524: in __init__
    self.parallel_processor = ParallelProcessor(self.config.get('parallel_processing'))
app\core\performance_optimizer.py:184: in __init__
    self.config = config or get_config()['performance']['parallel_processing']
E   KeyError: 'parallel_processing'
________________________________________________________________ ERROR at setup of TestBatchEngine.test_process_empty_queue ________________________________________________________________
tests\test_performance_optimizer.py:215: in setup_method
    self.batch_engine = BatchEngine(config=config)
app\core\performance_optimizer.py:524: in __init__
    self.parallel_processor = ParallelProcessor(self.config.get('parallel_processing'))
app\core\performance_optimizer.py:184: in __init__
    self.config = config or get_config()['performance']['parallel_processing']
E   KeyError: 'parallel_processing'
__________________________________________________________________________ ERROR at setup of test_initialization ___________________________________________________________________________
tests\adaptive\test_coordinator.py:25: in mock_subsystems
    with patch('app.core.adaptive.coordinator.PatternLearner') as MockPatternLearner, \
..\..\..\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py:1446: in __enter__
    original, local = self.get_original()
..\..\..\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py:1419: in get_original
    raise AttributeError(
E   AttributeError: <module 'app.core.adaptive.coordinator' from 'C:\\Users\\tomas\\Desktop\\0001 DUOMENU ANALITIKA\\038_AnonymPDF\\app\\core\\adaptive\\coordinator.py'> does not have the attribute 'PatternLearner'
_________________________________________________________________ ERROR at setup of test_process_feedback_and_learn_cycle __________________________________________________________________
tests\adaptive\test_coordinator.py:25: in mock_subsystems
    with patch('app.core.adaptive.coordinator.PatternLearner') as MockPatternLearner, \
..\..\..\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py:1446: in __enter__
    original, local = self.get_original()
..\..\..\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py:1419: in get_original
    raise AttributeError(
E   AttributeError: <module 'app.core.adaptive.coordinator' from 'C:\\Users\\tomas\\Desktop\\0001 DUOMENU ANALITIKA\\038_AnonymPDF\\app\\core\\adaptive\\coordinator.py'> does not have the attribute 'PatternLearner'
_________________________________________________________________ ERROR at setup of test_process_feedback_with_no_new_pii __________________________________________________________________
tests\adaptive\test_coordinator.py:25: in mock_subsystems
    with patch('app.core.adaptive.coordinator.PatternLearner') as MockPatternLearner, \
..\..\..\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py:1446: in __enter__
    original, local = self.get_original()
..\..\..\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py:1419: in get_original
    raise AttributeError(
E   AttributeError: <module 'app.core.adaptive.coordinator' from 'C:\\Users\\tomas\\Desktop\\0001 DUOMENU ANALITIKA\\038_AnonymPDF\\app\\core\\adaptive\\coordinator.py'> does not have the attribute 'PatternLearner'
______________________________________________________________________ ERROR at setup of test_ab_testing_integration _______________________________________________________________________
tests\adaptive\test_coordinator.py:25: in mock_subsystems
    with patch('app.core.adaptive.coordinator.PatternLearner') as MockPatternLearner, \
..\..\..\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py:1446: in __enter__
    original, local = self.get_original()
..\..\..\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py:1419: in get_original
    raise AttributeError(
E   AttributeError: <module 'app.core.adaptive.coordinator' from 'C:\\Users\\tomas\\Desktop\\0001 DUOMENU ANALITIKA\\038_AnonymPDF\\app\\core\\adaptive\\coordinator.py'> does not have the attribute 'PatternLearner'
_____________________________________________________________________ ERROR at setup of test_evaluate_and_log_ab_test ______________________________________________________________________
tests\adaptive\test_coordinator.py:25: in mock_subsystems
    with patch('app.core.adaptive.coordinator.PatternLearner') as MockPatternLearner, \
..\..\..\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py:1446: in __enter__
    original, local = self.get_original()
..\..\..\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py:1419: in get_original
    raise AttributeError(
E   AttributeError: <module 'app.core.adaptive.coordinator' from 'C:\\Users\\tomas\\Desktop\\0001 DUOMENU ANALITIKA\\038_AnonymPDF\\app\\core\\adaptive\\coordinator.py'> does not have the attribute 'PatternLearner'
___________________________________________________________________________ ERROR at setup of test_close_method ____________________________________________________________________________
tests\adaptive\test_coordinator.py:25: in mock_subsystems
    with patch('app.core.adaptive.coordinator.PatternLearner') as MockPatternLearner, \
..\..\..\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py:1446: in __enter__
    original, local = self.get_original()
..\..\..\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py:1419: in get_original
    raise AttributeError(
E   AttributeError: <module 'app.core.adaptive.coordinator' from 'C:\\Users\\tomas\\Desktop\\0001 DUOMENU ANALITIKA\\038_AnonymPDF\\app\\core\\adaptive\\coordinator.py'> does not have the attribute 'PatternLearner'
_________________________________________________________________________ ERROR at setup of test_fixture_creation __________________________________________________________________________
tests\system\test_adaptive_workflow.py:83: in adaptive_system_fixture
    quality_analyzer = QualityAnalyzer(storage_path=ANALYTICS_DB_PATH)
E   TypeError: QualityAnalyzer.__init__() got an unexpected keyword argument 'storage_path'
_________________________________________________________ ERROR at setup of test_feedback_creates_pattern_and_overrides_prediction _________________________________________________________
tests\system\test_adaptive_workflow.py:83: in adaptive_system_fixture
    quality_analyzer = QualityAnalyzer(storage_path=ANALYTICS_DB_PATH)
E   TypeError: QualityAnalyzer.__init__() got an unexpected keyword argument 'storage_path'
_____________________________________________________________________ ERROR at setup of test_ab_testing_full_lifecycle _____________________________________________________________________
tests\system\test_adaptive_workflow.py:83: in adaptive_system_fixture
    quality_analyzer = QualityAnalyzer(storage_path=ANALYTICS_DB_PATH)
E   TypeError: QualityAnalyzer.__init__() got an unexpected keyword argument 'storage_path'
========================================================================================= FAILURES =========================================================================================
______________________________________________________________________ TestQualityAnalyzer.test_add_detection_results ______________________________________________________________________
tests\test_analytics_engine.py:59: in test_add_detection_results
    cursor = conn.execute("SELECT COUNT(*) FROM detection_results")
E   sqlite3.OperationalError: no such table: detection_results
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:00:10,255 - anonympdf.ml_monitoring - INFO - ML Performance Monitor initialized
2025-06-12 20:00:10,255 - anonympdf.anonympdf.analytics - INFO - QualityAnalyzer initialized - {"extra": {"db_path": "C:\\Users\\tomas\\AppData\\Local\\Temp\\tmpwlrru4lm\\analytics_test.db"}}
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-12 20:00:10,255 - anonympdf.anonympdf.analytics - ERROR - Error adding detection results: no such table: detection_results
_______________________________________________________________ TestQualityAnalyzer.test_analyze_detection_quality_with_data _______________________________________________________________
tests\test_analytics_engine.py:75: in test_analyze_detection_quality_with_data
    assert "EMAIL" in metrics and "PHONE" in metrics
E   AssertionError: assert ('EMAIL' in {})
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:00:11,169 - anonympdf.ml_monitoring - INFO - ML Performance Monitor initialized
2025-06-12 20:00:11,169 - anonympdf.anonympdf.analytics - INFO - QualityAnalyzer initialized - {"extra": {"db_path": "C:\\Users\\tomas\\AppData\\Local\\Temp\\tmpn4mjiwap\\analytics_test.db"}}
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-12 20:00:11,169 - anonympdf.anonympdf.analytics - ERROR - Error adding detection results: no such table: detection_results
2025-06-12 20:00:11,169 - anonympdf.anonympdf.analytics - ERROR - Error adding detection results: no such table: detection_results
2025-06-12 20:00:11,169 - anonympdf.anonympdf.analytics - ERROR - Error analyzing detection quality: no such table: detection_results
_____________________________________________________________ TestQualityInsightsGenerator.test_generate_report_with_insights ______________________________________________________________
tests\test_analytics_engine.py:97: in test_generate_report_with_insights
    mock_analyzer.get_detected_issues.return_value = []
..\..\..\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py:653: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'get_detected_issues'
_____________________________________________________________________ TestConfigManager.test_configuration_validation ______________________________________________________________________
tests\test_config_manager.py:67: in test_configuration_validation
    assert is_valid is True
E   assert False is True
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-12 20:00:11,338 - config_manager - WARNING - Configuration validation failed - {"error_count": 10, "errors": ["Missing required setting: version", "Missing required setting: language_detection", "Missing required setting: processing", "Missing required setting: logging", "Missing required setting: anti_overredaction", "Missing required adaptive learning setting: enabled", "Missing required adaptive learning setting: databases", "Missing required adaptive learning setting: thresholds", "Missing required adaptive learning setting: performance", "Missing required adaptive learning setting: monitoring"]}
________________________________________________________ TestFeedbackSystemIntegration.test_feedback_submission_and_processing_flow ________________________________________________________
tests\test_feedback_system.py:499: in test_feedback_submission_and_processing_flow
    with patch.object(self.system.training_data_collector, 'save_training_examples') as mock_save:
..\..\..\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py:1446: in __enter__
    original, local = self.get_original()
..\..\..\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py:1419: in get_original
    raise AttributeError(
E   AttributeError: <app.core.training_data.TrainingDataCollector object at 0x000002753AB11F10> does not have the attribute 'save_training_examples'
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:00:48,810 - anonympdf.anonympdf.feedback_system - INFO - FeedbackAnalyzer initialized
2025-06-12 20:00:48,810 - anonympdf.anonympdf.feedback_system - INFO - UserFeedbackProcessor initialized
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-12 20:00:48,810 - anonympdf.anonympdf.feedback_system - INFO - Feedback submitted: false_positive for ADDRESS - {"feedback_id": "integration_test_001", "document_id": "doc_1"}
______________________________________________________________________ TestIntelligentCache.test_comprehensive_stats _______________________________________________________________________
tests\test_intelligent_cache.py:396: in test_comprehensive_stats
    assert stats['general']['hits'] == 1
E   KeyError: 'general'
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:00:52,732 - anonympdf.intelligent_cache - INFO - Cache cleared
2025-06-12 20:00:52,732 - anonympdf.intelligent_cache - INFO - Cache cleared
2025-06-12 20:00:52,732 - anonympdf.intelligent_cache - INFO - Cache cleared
2025-06-12 20:00:52,740 - anonympdf.intelligent_cache - INFO - All caches cleared
____________________________________________________________________________ TestConcurrency.test_thread_safety ____________________________________________________________________________
tests\test_intelligent_cache.py:561: in test_thread_safety
    assert stats['general']['size'] == 100
E   KeyError: 'general'
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:00:53,310 - anonympdf.intelligent_cache - INFO - Cache cleared
2025-06-12 20:00:53,310 - anonympdf.intelligent_cache - INFO - Cache cleared
2025-06-12 20:00:53,310 - anonympdf.intelligent_cache - INFO - Cache cleared
2025-06-12 20:00:53,310 - anonympdf.intelligent_cache - INFO - All caches cleared
______________________________________________________________________ TestIntegration.test_memory_threshold_handling ______________________________________________________________________
tests\test_memory_optimizer.py:700: in test_memory_threshold_handling
    assert len(high_mem_calls) > 0, "MemoryMonitor should log a warning for high memory usage"
E   AssertionError: MemoryMonitor should log a warning for high memory usage
E   assert 0 > 0
E    +  where 0 = len([])
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:00:58,894 - anonympdf.memory_optimizer - INFO - GarbageCollectionManager initialized
2025-06-12 20:00:58,894 - anonympdf.memory_optimizer - INFO - MemoryMonitor initialized
2025-06-12 20:00:58,894 - anonympdf.memory_optimizer - INFO - MemoryOptimizer initialized. Config: {'cache_size': 1000, 'cache_ttl_seconds': 3600, 'max_workers': 4}
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-12 20:00:58,910 - anonympdf.memory_optimizer - INFO - MemoryOptimizer.start_optimization() called. Starting memory monitoring.
2025-06-12 20:00:58,947 - anonympdf.memory_optimizer - INFO - Memory monitoring started
2025-06-12 20:00:59,029 - anonympdf.memory_optimizer - INFO - Memory baseline set - {"baseline_mb": 100.0}
--------------------------------------------------------------------------------- Captured stderr teardown ---------------------------------------------------------------------------------
2025-06-12 20:00:59,225 - anonympdf.memory_optimizer - WARNING - High memory usage detected - {"memory_percent": 75.0, "rss_mb": 100.0}
2025-06-12 20:00:59,295 - anonympdf.memory_optimizer - INFO - MemoryOptimizer.stop_optimization() called. Stopping memory monitoring.
2025-06-12 20:00:59,295 - anonympdf.memory_optimizer - WARNING - Critical memory usage detected - {"memory_percent": 93.5, "rss_mb": 2930.67578125}
2025-06-12 20:00:59,317 - anonympdf.memory_optimizer - INFO - Memory monitoring stopped
________________________________________________________ TestMLConfidenceScorerIntegration.test_adaptive_pattern_overrides_ml_model ________________________________________________________
tests\test_ml_integration_layer.py:331: in test_adaptive_pattern_overrides_ml_model
    prediction = scorer.calculate_ml_confidence(
app\core\ml_engine.py:254: in calculate_ml_confidence
    adaptive_prediction = self._apply_adaptive_patterns(detection)
app\core\ml_engine.py:223: in _apply_adaptive_patterns
    return MLPrediction(
E   TypeError: MLPrediction.__init__() got an unexpected keyword argument 'probability'
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-12 20:00:59,495 - anonympdf.app.core.ml_engine - INFO - Model loaded: models\confidence_scorer_v20250603_154307.joblib
2025-06-12 20:00:59,495 - anonympdf.app.core.ml_engine - INFO - Model loaded: models\confidence_scaler_v20250603_154307.joblib
2025-06-12 20:00:59,510 - anonympdf.app.core.ml_engine - INFO - Model loaded: models\confidence_calibrator_v20250603_154307.joblib
2025-06-12 20:00:59,510 - anonympdf.app.core.ml_engine - INFO - Loaded existing ML confidence model
2025-06-12 20:00:59,510 - anonympdf.app.core.ml_engine - INFO - Detection matched high-confidence adaptive pattern ID: p_user_123
_______________________________________________________ TestMorningSes5AntiOverredaction.test_no_preserve_pii_in_technical_sections ________________________________________________________
tests\test_morning_ses5_improvements.py:209: in test_no_preserve_pii_in_technical_sections
    assert not processor.should_preserve_detection(
E   AssertionError: assert not True
E    +  where True = <bound method PDFProcessor.should_preserve_detection of <app.services.pdf_processor.PDFProcessor object at 0x00000274986D0050>>('38901234567', 'lithuanian_personal_code', 'SVORIS: Asmens kodas: 38901234567')
E    +    where <bound method PDFProcessor.should_preserve_detection of <app.services.pdf_processor.PDFProcessor object at 0x00000274986D0050>> = <app.services.pdf_processor.PDFProcessor object at 0x00000274986D0050>.should_preserve_detection
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:01:03,027 - anonympdf.pdf - INFO - Initializing PDF processor with Priority 2 enhancements
2025-06-12 20:01:03,027 - config_manager - INFO - Patterns loaded from file - {"file": "config\\patterns.yaml", "patterns_count": 37}
2025-06-12 20:01:03,043 - config_manager - INFO - Cities loaded from file - {"file": "config\\cities.yaml", "cities_count": 79}
2025-06-12 20:01:03,059 - config_manager - INFO - Settings loaded from file - {"file": "config\\settings.yaml"}
2025-06-12 20:01:03,059 - config_manager - INFO - Configuration manager initialized - {"config_dir": "config", "patterns_count": 37, "cities_count": 79}
2025-06-12 20:01:03,059 - anonympdf.pdf - INFO - Configuration manager loaded - {"patterns_count": 37, "cities_count": 79}
2025-06-12 20:01:03,059 - anonympdf.pdf - INFO - Priority 2 context-aware components initialized
2025-06-12 20:01:04,475 - anonympdf.pdf - INFO - English spaCy model loaded successfully - {"model": "en_core_web_sm", "components": 6, "method": "standard"}
2025-06-12 20:01:05,105 - anonympdf.pdf - INFO - Lithuanian spaCy model loaded successfully - {"model": "lt_core_news_sm", "components": 7, "method": "standard"}
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-12 20:01:05,121 - anonympdf.pdf - INFO - Detection preserved due to technical term context - {"text": "38901234567", "pattern_type": "lithuanian_personal_code", "technical_term": "SVORIS"}
_________________________________________________________________________________ test_find_personal_info __________________________________________________________________________________
tests\test_pdf_processor.py:43: in test_find_personal_info
    personal_info = pdf_processor.find_personal_info(sample_text, language="en")
app\core\performance.py:576: in wrapper
    result = func(*args, **kwargs)
app\services\pdf_processor.py:339: in find_personal_info
    matches = re.finditer(current_regex_text, text)
..\..\..\AppData\Local\Programs\Python\Python311\Lib\re\__init__.py:223: in finditer
    return _compile(pattern, flags).finditer(string)
..\..\..\AppData\Local\Programs\Python\Python311\Lib\re\__init__.py:277: in _compile
    return _cache[type(pattern), pattern, flags]
E   TypeError: unhashable type: 'list'
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-12 20:01:10,455 - anonympdf.pdf - INFO - Using English NLP model for processing - {"language": "en"}
2025-06-12 20:01:10,518 - anonympdf.performance - INFO - Performance tracking: pii_detection - {"duration": 0.0624847412109375, "memory_delta": 0.98046875, "function": "find_personal_info"}
______________________________________________________________________________ test_generate_redaction_report ______________________________________________________________________________
tests\test_pdf_processor.py:61: in test_generate_redaction_report
    personal_info = pdf_processor.find_personal_info(sample_text, language="en")
app\core\performance.py:576: in wrapper
    result = func(*args, **kwargs)
app\services\pdf_processor.py:339: in find_personal_info
    matches = re.finditer(current_regex_text, text)
..\..\..\AppData\Local\Programs\Python\Python311\Lib\re\__init__.py:223: in finditer
    return _compile(pattern, flags).finditer(string)
..\..\..\AppData\Local\Programs\Python\Python311\Lib\re\__init__.py:277: in _compile
    return _cache[type(pattern), pattern, flags]
E   TypeError: unhashable type: 'list'
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-12 20:01:10,587 - anonympdf.pdf - INFO - Using English NLP model for processing - {"language": "en"}
2025-06-12 20:01:10,595 - anonympdf.performance - INFO - Performance tracking: pii_detection - {"duration": 0.008057594299316406, "memory_delta": 0.0, "function": "find_personal_info"}
_______________________________________________________________________ test_process_pdf_failure_on_invalid_content ________________________________________________________________________
tests\test_pdf_processor.py:94: in test_process_pdf_failure_on_invalid_content
    assert "Failed to open document" in result["error"]
E   AssertionError: assert 'Failed to open document' in 'An exception occurred during anonymization'
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-12 20:01:10,652 - anonympdf.pdf - INFO - Starting PDF processing - {"filename": "C:\\Users\\tomas\\AppData\\Local\\Temp\\pytest-of-tomas\\pytest-30\\test_process_pdf_failure_on_in0\\test.pdf"}
2025-06-12 20:01:10,667 - anonympdf.pdf - INFO - File copied to temp directory - {"filename": "test.pdf", "temp_path": "temp\\test.pdf", "file_size": 52}
2025-06-12 20:01:10,667 - anonympdf.pdf - INFO - Starting PDF anonymization - {"input_path": "temp\\test.pdf", "output_path": "processed\\anonymized_test.pdf"}
2025-06-12 20:01:10,667 - anonympdf.performance - INFO - Performance tracking: text_extraction - {"duration": 0.0, "memory_delta": 0.0, "function": "extract_text_from_pdf"}
2025-06-12 20:01:10,667 - anonympdf.pdf - ERROR - Error in anonymize_pdf: TypeError - Logger._log() got an unexpected keyword argument 'error' - {"input_path": "temp\\test.pdf", "output_path": "processed\\anonymized_test.pdf"}
Traceback (most recent call last):
  File "C:\Users\tomas\Desktop\0001 DUOMENU ANALITIKA\038_AnonymPDF\app\core\text_extraction.py", line 63, in extract_text_robust
    text = method_func(pdf_path)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\tomas\Desktop\0001 DUOMENU ANALITIKA\038_AnonymPDF\app\core\text_extraction.py", line 112, in _extract_with_pymupdf
    doc = fitz.open(str(pdf_path))
          ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py", line 1124, in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py", line 1128, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py", line 1183, in _execute_mock_call
    raise effect
RuntimeError: Failed to open document

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\tomas\Desktop\0001 DUOMENU ANALITIKA\038_AnonymPDF\app\services\pdf_processor.py", line 582, in anonymize_pdf
    text = self.extract_text_from_pdf(input_path)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\tomas\Desktop\0001 DUOMENU ANALITIKA\038_AnonymPDF\app\core\performance.py", line 576, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\tomas\Desktop\0001 DUOMENU ANALITIKA\038_AnonymPDF\app\services\pdf_processor.py", line 791, in extract_text_from_pdf
    return extract_text_enhanced(pdf_path)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\tomas\Desktop\0001 DUOMENU ANALITIKA\038_AnonymPDF\app\core\intelligent_cache.py", line 641, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\tomas\Desktop\0001 DUOMENU ANALITIKA\038_AnonymPDF\app\core\text_extraction.py", line 340, in extract_text_enhanced
    return enhanced_extractor.extract_text_robust(pdf_path)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\tomas\Desktop\0001 DUOMENU ANALITIKA\038_AnonymPDF\app\core\text_extraction.py", line 86, in extract_text_robust
    extraction_logger.warning(
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1501, in warning
    self._log(WARNING, msg, args, **kwargs)
TypeError: Logger._log() got an unexpected keyword argument 'error'
2025-06-12 20:01:10,667 - anonympdf.pdf - ERROR - BENCHMARK: anonymize_pdf for test.pdf failed after 0.0000 seconds.
2025-06-12 20:01:10,667 - anonympdf.pdf - ERROR - PDF processing failed - {"filename": "test.pdf", "error": "An exception occurred during anonymization", "processing_time": 0.0}
2025-06-12 20:01:10,667 - anonympdf.performance - INFO - Performance tracking: pdf_processing - {"duration": 0.0, "memory_delta": 0.03515625, "file_size_mb": 4.9591064453125e-05, "file_extension": ".pdf", "operation_type": "pdf_processing"}
2025-06-12 20:01:10,667 - anonympdf.pdf - INFO - Temporary file cleaned up - {"temp_path": "temp\\test.pdf"}
------------------------------------------------------------------------------------ Captured log call -------------------------------------------------------------------------------------
ERROR    app.core.text_extraction:text_extraction.py:127 PyMuPDF extraction failed: Failed to open document
__________________________________________________________________ TestPerformanceIntegration.test_get_performance_report __________________________________________________________________
tests\test_performance.py:214: in test_get_performance_report
    report = get_performance_report()
app\core\performance.py:623: in get_performance_report
    report["performance_optimizer_stats"] = get_performance_stats()
app\core\performance_optimizer.py:897: in get_performance_stats
    return get_performance_optimizer().get_optimization_stats()
app\core\performance_optimizer.py:891: in get_performance_optimizer
    _performance_optimizer = PerformanceOptimizer(config=config)
app\core\performance_optimizer.py:668: in __init__
    self.parallel_processor = ParallelProcessor(self.config.get('parallel_processing'))
app\core\performance_optimizer.py:184: in __init__
    self.config = config or get_config()['performance']['parallel_processing']
E   KeyError: 'parallel_processing'
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-12 20:01:11,401 - anonympdf.performance - INFO - Performance tracking: integration_test - {"duration": 0.05489778518676758, "memory_delta": 0.0}
_____________________________________________________________________ TestGlobalFunctions.test_get_performance_report ______________________________________________________________________
tests\test_performance_enhanced.py:470: in test_get_performance_report
    with global_performance_monitor.track_operation("global_op") as tracker:
E   TypeError: 'dict' object does not support the context manager protocol
_____________________________________________________________________ TestGlobalFunctions.test_get_parallel_processor ______________________________________________________________________
tests\test_performance_enhanced.py:480: in test_get_parallel_processor
    processor = get_parallel_processor()
app\core\performance.py:635: in get_parallel_processor
    return get_optimized_processor()
app\core\performance.py:605: in get_optimized_processor
    _optimized_processor = PerformanceOptimizedProcessor()
app\core\performance.py:380: in __init__
    self._load_optimizers()
app\core\performance.py:389: in _load_optimizers
    self._performance_optimizer = get_performance_optimizer()
app\core\performance_optimizer.py:891: in get_performance_optimizer
    _performance_optimizer = PerformanceOptimizer(config=config)
app\core\performance_optimizer.py:668: in __init__
    self.parallel_processor = ParallelProcessor(self.config.get('parallel_processing'))
app\core\performance_optimizer.py:184: in __init__
    self.config = config or get_config()['performance']['parallel_processing']
E   KeyError: 'parallel_processing'
_______________________________________________________________ TestGlobalFunctions.test_performance_report_with_optimizers ________________________________________________________________
tests\test_performance_enhanced.py:485: in test_performance_report_with_optimizers
    processor = get_optimized_processor() # No longer takes config
app\core\performance.py:605: in get_optimized_processor
    _optimized_processor = PerformanceOptimizedProcessor()
app\core\performance.py:380: in __init__
    self._load_optimizers()
app\core\performance.py:389: in _load_optimizers
    self._performance_optimizer = get_performance_optimizer()
app\core\performance_optimizer.py:891: in get_performance_optimizer
    _performance_optimizer = PerformanceOptimizer(config=config)
app\core\performance_optimizer.py:668: in __init__
    self.parallel_processor = ParallelProcessor(self.config.get('parallel_processing'))
app\core\performance_optimizer.py:184: in __init__
    self.config = config or get_config()['performance']['parallel_processing']
E   KeyError: 'parallel_processing'
___________________________________________________________________ TestIntegration.test_end_to_end_parallel_processing ____________________________________________________________________
tests\test_performance_enhanced.py:495: in test_end_to_end_parallel_processing
    processor = get_optimized_processor() # No longer takes config
app\core\performance.py:605: in get_optimized_processor
    _optimized_processor = PerformanceOptimizedProcessor()
app\core\performance.py:380: in __init__
    self._load_optimizers()
app\core\performance.py:389: in _load_optimizers
    self._performance_optimizer = get_performance_optimizer()
app\core\performance_optimizer.py:891: in get_performance_optimizer
    _performance_optimizer = PerformanceOptimizer(config=config)
app\core\performance_optimizer.py:668: in __init__
    self.parallel_processor = ParallelProcessor(self.config.get('parallel_processing'))
app\core\performance_optimizer.py:184: in __init__
    self.config = config or get_config()['performance']['parallel_processing']
E   KeyError: 'parallel_processing'
____________________________________________________________________ TestIntegration.test_concurrent_metric_collection _____________________________________________________________________
tests\test_performance_enhanced.py:521: in test_concurrent_metric_collection
    processor = get_optimized_processor() # No longer takes config
app\core\performance.py:605: in get_optimized_processor
    _optimized_processor = PerformanceOptimizedProcessor()
app\core\performance.py:380: in __init__
    self._load_optimizers()
app\core\performance.py:389: in _load_optimizers
    self._performance_optimizer = get_performance_optimizer()
app\core\performance_optimizer.py:891: in get_performance_optimizer
    _performance_optimizer = PerformanceOptimizer(config=config)
app\core\performance_optimizer.py:668: in __init__
    self.parallel_processor = ParallelProcessor(self.config.get('parallel_processing'))
app\core\performance_optimizer.py:184: in __init__
    self.config = config or get_config()['performance']['parallel_processing']
E   KeyError: 'parallel_processing'
_______________________________________________________________________ TestIntegration.test_performance_under_load ________________________________________________________________________
tests\test_performance_enhanced.py:543: in test_performance_under_load
    processor = get_optimized_processor() # No longer takes config
app\core\performance.py:605: in get_optimized_processor
    _optimized_processor = PerformanceOptimizedProcessor()
app\core\performance.py:380: in __init__
    self._load_optimizers()
app\core\performance.py:389: in _load_optimizers
    self._performance_optimizer = get_performance_optimizer()
app\core\performance_optimizer.py:891: in get_performance_optimizer
    _performance_optimizer = PerformanceOptimizer(config=config)
app\core\performance_optimizer.py:668: in __init__
    self.parallel_processor = ParallelProcessor(self.config.get('parallel_processing'))
app\core\performance_optimizer.py:184: in __init__
    self.config = config or get_config()['performance']['parallel_processing']
E   KeyError: 'parallel_processing'
_____________________________________________________________________ TestGlobalInstances.test_get_parallel_processor ______________________________________________________________________
tests\test_performance_optimizer.py:334: in test_get_parallel_processor
    processor = get_parallel_processor()
app\core\performance_optimizer.py:642: in get_parallel_processor
    _parallel_processor = ParallelProcessor(config=config.get('parallel_processing', {}))
app\core\performance_optimizer.py:184: in __init__
    self.config = config or get_config()['performance']['parallel_processing']
E   KeyError: 'parallel_processing'
________________________________________________________________________ TestGlobalInstances.test_get_batch_engine _________________________________________________________________________
tests\test_performance_optimizer.py:341: in test_get_batch_engine
    engine = get_batch_engine()
app\core\performance_optimizer.py:651: in get_batch_engine
    _batch_engine = BatchEngine(config=config)
app\core\performance_optimizer.py:524: in __init__
    self.parallel_processor = ParallelProcessor(self.config.get('parallel_processing'))
app\core\performance_optimizer.py:184: in __init__
    self.config = config or get_config()['performance']['parallel_processing']
E   KeyError: 'parallel_processing'
________________________________________________________________________ TestIntegration.test_end_to_end_processing ________________________________________________________________________
tests\test_performance_optimizer.py:357: in test_end_to_end_processing
    batch_engine = get_batch_engine()
app\core\performance_optimizer.py:651: in get_batch_engine
    _batch_engine = BatchEngine(config=config)
app\core\performance_optimizer.py:524: in __init__
    self.parallel_processor = ParallelProcessor(self.config.get('parallel_processing'))
app\core\performance_optimizer.py:184: in __init__
    self.config = config or get_config()['performance']['parallel_processing']
E   KeyError: 'parallel_processing'
_________________________________________________________________ TestIntegration.test_performance_improvement_simulation __________________________________________________________________
tests\test_performance_optimizer.py:379: in test_performance_improvement_simulation
    processor = get_parallel_processor()
app\core\performance_optimizer.py:642: in get_parallel_processor
    _parallel_processor = ParallelProcessor(config=config.get('parallel_processing', {}))
app\core\performance_optimizer.py:184: in __init__
    self.config = config or get_config()['performance']['parallel_processing']
E   KeyError: 'parallel_processing'
___________________________________________________________________ TestAnomalyDetector.test_alert_threshold_integration ___________________________________________________________________
tests\test_real_time_monitor.py:156: in test_alert_threshold_integration
    assert len(anomalies) > 0
E   assert 0 > 0
E    +  where 0 = len([])
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:01:13,859 - anonympdf.anonympdf.real_time_monitor - INFO - AnomalyDetector initialized with sensitivity: medium, alert_thresholds: 0
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-12 20:01:13,859 - anonympdf.anonympdf.real_time_monitor - INFO - Added alert threshold for test_metric
________________________________________________________________ TestRealTimeMonitor.test_ml_monitor_callback_functionality ________________________________________________________________
tests\test_real_time_monitor.py:353: in test_ml_monitor_callback_functionality
    assert mock_system.call_count == 1
E   AssertionError: assert 0 == 1
E    +  where 0 = <MagicMock name='get_system_metrics' id='2703201437456'>.call_count
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:01:14,561 - anonympdf.anonympdf.real_time_monitor - INFO - AnomalyDetector initialized with sensitivity: medium, alert_thresholds: 0
2025-06-12 20:01:14,561 - anonympdf.anonympdf.real_time_monitor - INFO - PerformanceAggregator initialized
2025-06-12 20:01:14,607 - anonympdf.anonympdf.real_time_monitor - INFO - RealTimeMonitor initialized
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-12 20:01:14,614 - anonympdf.anonympdf.real_time_monitor - INFO - Registered as ML metrics callback for automatic forwarding
______________________________________________________________________ TestRealTimeMonitor.test_alert_callback_system ______________________________________________________________________
tests\test_real_time_monitor.py:452: in test_alert_callback_system
    self.monitor._process_anomaly_alerts([mock_anomaly])
app\core\real_time_monitor.py:670: in _process_anomaly_alerts
    self._store_anomaly(anomaly)
app\core\real_time_monitor.py:709: in _store_anomaly
    json.dumps(anomaly.context)
..\..\..\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py:231: in dumps
    return _default_encoder.encode(obj)
..\..\..\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py:200: in encode
    chunks = self.iterencode(o, _one_shot=True)
..\..\..\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py:258: in iterencode
    return _iterencode(o, 0)
..\..\..\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py:180: in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
E   TypeError: Object of type Mock is not JSON serializable
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:01:15,817 - anonympdf.anonympdf.real_time_monitor - INFO - AnomalyDetector initialized with sensitivity: medium, alert_thresholds: 0
2025-06-12 20:01:15,817 - anonympdf.anonympdf.real_time_monitor - INFO - PerformanceAggregator initialized
2025-06-12 20:01:15,848 - anonympdf.anonympdf.real_time_monitor - INFO - RealTimeMonitor initialized
_______________________________________________________________ TestTrainingDataStorage.test_save_and_load_training_examples _______________________________________________________________
tests\test_training_data_collector.py:92: in test_save_and_load_training_examples
    create_dummy_example("123 Main St", "ADDRESS", True, "doc1", source="test_source_1"),
E   TypeError: create_dummy_example() got an unexpected keyword argument 'source'
___________________________________________________________________ TestTrainingDataStorage.test_get_dataset_stats_empty ___________________________________________________________________
tests\test_training_data_collector.py:129: in test_get_dataset_stats_empty
    assert stats.total_samples == 0
E   AttributeError: 'NoneType' object has no attribute 'total_samples'
____________________________________________________________ TestTrainingDataCollector.test_get_balanced_training_set_with_data ____________________________________________________________
tests\test_training_data_collector.py:216: in test_get_balanced_training_set_with_data
    assert stats.total_samples == 13
E   assert 6 == 13
E    +  where 6 = DatasetStats(total_samples=6, positive_samples=3, negative_samples=3, categories={}, document_types={}, date_range=(datetime.datetime(2025, 6, 12, 20, 1, 28, 926727), datetime.datetime(2025, 6, 12, 20, 1, 28, 926727)), quality_score=1.0).total_samples
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-12 20:01:28,926 - anonympdf.app.core.training_data - INFO - Created balanced training set: 6 examples
_____________________________________________________________________ TestPersonNameValidation.test_length_validation ______________________________________________________________________
tests\test_validation_utils.py:58: in test_length_validation
    assert not validate_person_name("This Is A Very Long Name That Should Be Rejected")
E   AssertionError: assert not True
E    +  where True = validate_person_name('This Is A Very Long Name That Should Be Rejected')
_____________________________________________________________ TestABTestManager.test_record_and_evaluate_metrics_variant_wins ______________________________________________________________
tests\adaptive\test_ab_testing.py:112: in test_record_and_evaluate_metrics_variant_wins
    self.assertEqual(result.metrics_comparison['accuracy']['winner'], 'variant')
E   KeyError: 'winner'
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-12 20:01:29,516 - anonympdf.ab_testing - INFO - Loading A/B tests from database.
2025-06-12 20:01:29,516 - anonympdf.ab_testing - INFO - Loaded 0 tests.
2025-06-12 20:01:29,516 - anonympdf.ab_testing - INFO - ABTestManager initialized with database at test_ab_manager.db.
2025-06-12 20:01:29,516 - anonympdf.ab_testing - INFO - Saving test ab_62c2e9dc to database.
2025-06-12 20:01:29,531 - anonympdf.ab_testing - INFO - Created new A/B test 'Evaluation Test' with ID ab_62c2e9dc.
2025-06-12 20:01:29,531 - anonympdf.ab_testing - INFO - Saving test ab_62c2e9dc to database.
2025-06-12 20:01:29,538 - anonympdf.ab_testing - INFO - Started A/B test 'Evaluation Test' (ID: ab_62c2e9dc).
C:\Users\tomas\Desktop\0001 DUOMENU ANALITIKA\038_AnonymPDF\venv\Lib\site-packages\scipy\stats\_axis_nan_policy.py:586: RuntimeWarning: Precision loss occurred in moment calculation due to catastrophic cancellation. This occurs when the data are nearly identical. Results may be unreliable.
  res = hypotest_fun_out(*samples, **kwds)
2025-06-12 20:01:30,039 - anonympdf.ab_testing - INFO - Database connection to test_ab_manager.db closed.
_______________________________________________________ TestOnlineLearner.test_retrain_model_saves_examples_and_triggers_retraining ________________________________________________________
tests\adaptive\test_online_learner.py:123: in test_retrain_model_saves_examples_and_triggers_retraining
    online_learner.retrain_model(sample_training_examples)
E   AttributeError: 'OnlineLearner' object has no attribute 'retrain_model'
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:01:30,718 - anonympdf.adaptive_learning.online_learner - INFO - OnlineLearner initialized.
_________________________________________________________ TestOnlineLearner.test_retrain_model_saves_examples_but_skips_retraining _________________________________________________________
tests\adaptive\test_online_learner.py:134: in test_retrain_model_saves_examples_but_skips_retraining
    online_learner.retrain_model(sample_training_examples)
E   AttributeError: 'OnlineLearner' object has no attribute 'retrain_model'
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:01:30,740 - anonympdf.adaptive_learning.online_learner - INFO - OnlineLearner initialized.
__________________________________________________________________ TestPatternLearner.test_discover_and_validate_patterns __________________________________________________________________
tests\adaptive\test_pattern_learner.py:39: in test_discover_and_validate_patterns
    assert len(patterns) == 1
E   assert 0 == 1
E    +  where 0 = len([])
---------------------------------------------------------------------------------- Captured stderr setup -----------------------------------------------------------------------------------
2025-06-12 20:01:30,919 - anonympdf.app.core.adaptive.pattern_learner - INFO - PatternLearner initialized - {"min_confidence": 0.8, "min_samples": 3}
----------------------------------------------------------------------------------- Captured stderr call -----------------------------------------------------------------------------------
2025-06-12 20:01:30,919 - anonympdf.app.core.adaptive.pattern_learner - WARNING - Insufficient samples for pattern discovery. Need 3, got 1
=================================================================================== slowest 10 durations ===================================================================================
3.52s setup    tests/test_feedback_system.py::TestUserFeedbackProcessor::test_validate_feedback_invalid
3.46s setup    tests/test_feedback_system.py::TestFeedbackSystemIntegration::test_concurrent_feedback_submission
3.28s setup    tests/test_feedback_system.py::TestUserFeedbackProcessor::test_process_pending_feedback
3.26s setup    tests/test_feedback_system.py::TestUserFeedbackProcessor::test_should_trigger_retrain_time
3.24s setup    tests/test_feedback_system.py::TestUserFeedbackProcessor::test_submit_feedback
3.18s setup    tests/test_feedback_system.py::TestFeedbackSystemIntegration::test_feedback_submission_and_processing_flow
3.07s setup    tests/test_feedback_system.py::TestUserFeedbackProcessor::test_feedback_to_training_example_false_positive
3.01s setup    tests/test_feedback_system.py::TestUserFeedbackProcessor::test_get_feedback_stats
3.00s setup    tests/test_feedback_system.py::TestFeedbackSystemIntegration::test_config_integration
2.99s setup    tests/test_feedback_system.py::TestUserFeedbackProcessor::test_initialization
================================================================================= short test summary info ==================================================================================
ERROR tests/test_analytics_engine.py::TestQualityAnalyzer::test_add_detection_results - PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\tomas\\AppData\\Local\\Temp\\tmpwlrru4lm\\analytics_test.db'
ERROR tests/test_ml_integration_layer.py::TestMLIntegrationLayerFeedback::test_add_user_feedback_confirmed_correct - TypeError: MLPrediction.__init__() got an unexpected keyword argument 'probability'
ERROR tests/test_ml_integration_layer.py::TestMLIntegrationLayerFeedback::test_add_user_feedback_false_positive - TypeError: MLPrediction.__init__() got an unexpected keyword argument 'probability'
ERROR tests/test_ml_integration_layer.py::TestMLIntegrationLayerFeedback::test_add_user_feedback_category_correction - TypeError: MLPrediction.__init__() got an unexpected keyword argument 'probability'
ERROR tests/test_ml_integration_layer.py::TestMLIntegrationLayerFeedback::test_add_user_feedback_context_details - TypeError: MLPrediction.__init__() got an unexpected keyword argument 'probability'
ERROR tests/test_ml_integration_layer.py::TestMLIntegrationLayerFeedback::test_add_user_feedback_handles_uuid - TypeError: MLPrediction.__init__() got an unexpected keyword argument 'probability'
ERROR tests/test_ml_integration_layer.py::TestMLIntegrationLayerFeedback::test_add_user_feedback_handles_user_feedback_system_failure - TypeError: MLPrediction.__init__() got an unexpected keyword argument 'probability'
ERROR tests/test_ml_integration_layer.py::TestMLIntegrationLayerDetectionProcessing::test_detect_with_ml_integration_calls_quality_analyzer - TypeError: MLPrediction.__init__() got an unexpected keyword argument 'probability'
ERROR tests/test_ml_integration_layer.py::TestMLIntegrationLayerDetectionProcessing::test_detect_with_ml_integration_calls_quality_analyzer_on_fallback - TypeError: MLPrediction.__init__() got an unexpected keyword argument 'probability'
ERROR tests/test_morning_ses5_improvements.py::TestMorningSes5Patterns::test_enhanced_car_plate_contextual_pattern - NameError: name 'PDFProcessor' is not defined
ERROR tests/test_morning_ses5_improvements.py::TestMorningSes5Patterns::test_enhanced_car_plate_enhanced_pattern - NameError: name 'PDFProcessor' is not defined
ERROR tests/test_morning_ses5_improvements.py::TestMorningSes5Patterns::test_lithuanian_name_all_caps_pattern - NameError: name 'PDFProcessor' is not defined
ERROR tests/test_morning_ses5_improvements.py::TestMorningSes5Patterns::test_lithuanian_name_contextual_pattern - NameError: name 'PDFProcessor' is not defined
ERROR tests/test_morning_ses5_improvements.py::TestMorningSes5Patterns::test_lithuanian_name_contextual_caps_pattern - NameError: name 'PDFProcessor' is not defined
ERROR tests/test_morning_ses5_improvements.py::TestMorningSes5Patterns::test_lithuanian_address_flexible_pattern - NameError: name 'PDFProcessor' is not defined
ERROR tests/test_morning_ses5_improvements.py::TestMorningSes5Patterns::test_lithuanian_personal_code_contextual_pattern - NameError: name 'PDFProcessor' is not defined
ERROR tests/test_morning_ses5_improvements.py::TestMorningSes5Integration::test_comprehensive_lithuanian_document_processing - NameError: name 'PDFProcessor' is not defined
ERROR tests/test_morning_ses5_improvements.py::TestMorningSes5Integration::test_anti_overredaction_in_technical_context - NameError: name 'PDFProcessor' is not defined
ERROR tests/test_performance_enhanced.py::TestPerformanceOptimizedProcessor::test_processor_initialization - KeyError: 'parallel_processing'
ERROR tests/test_performance_enhanced.py::TestPerformanceOptimizedProcessor::test_optimized_processing_session - KeyError: 'parallel_processing'
ERROR tests/test_performance_enhanced.py::TestPerformanceOptimizedProcessor::test_parallel_file_processing - KeyError: 'parallel_processing'
ERROR tests/test_performance_enhanced.py::TestPerformanceOptimizedProcessor::test_empty_files_processing - KeyError: 'parallel_processing'
ERROR tests/test_performance_enhanced.py::TestPerformanceOptimizedProcessor::test_single_file_processing_with_caching - KeyError: 'parallel_processing'
ERROR tests/test_performance_optimizer.py::TestBatchEngine::test_submit_batch - KeyError: 'parallel_processing'
ERROR tests/test_performance_optimizer.py::TestBatchEngine::test_process_next_batch - KeyError: 'parallel_processing'
ERROR tests/test_performance_optimizer.py::TestBatchEngine::test_get_queue_stats - KeyError: 'parallel_processing'
ERROR tests/test_performance_optimizer.py::TestBatchEngine::test_process_empty_queue - KeyError: 'parallel_processing'
ERROR tests/adaptive/test_coordinator.py::test_initialization - AttributeError: <module 'app.core.adaptive.coordinator' from 'C:\\Users\\tomas\\Desktop\\0001 DUOMENU ANALITIKA\\038_AnonymPDF\\app\\core\\adaptive\\coordinator.py'> does not have the ...
ERROR tests/adaptive/test_coordinator.py::test_process_feedback_and_learn_cycle - AttributeError: <module 'app.core.adaptive.coordinator' from 'C:\\Users\\tomas\\Desktop\\0001 DUOMENU ANALITIKA\\038_AnonymPDF\\app\\core\\adaptive\\coordinator.py'> does not have the ...
ERROR tests/adaptive/test_coordinator.py::test_process_feedback_with_no_new_pii - AttributeError: <module 'app.core.adaptive.coordinator' from 'C:\\Users\\tomas\\Desktop\\0001 DUOMENU ANALITIKA\\038_AnonymPDF\\app\\core\\adaptive\\coordinator.py'> does not have the ...
ERROR tests/adaptive/test_coordinator.py::test_ab_testing_integration - AttributeError: <module 'app.core.adaptive.coordinator' from 'C:\\Users\\tomas\\Desktop\\0001 DUOMENU ANALITIKA\\038_AnonymPDF\\app\\core\\adaptive\\coordinator.py'> does not have the ...
ERROR tests/adaptive/test_coordinator.py::test_evaluate_and_log_ab_test - AttributeError: <module 'app.core.adaptive.coordinator' from 'C:\\Users\\tomas\\Desktop\\0001 DUOMENU ANALITIKA\\038_AnonymPDF\\app\\core\\adaptive\\coordinator.py'> does not have the ...
ERROR tests/adaptive/test_coordinator.py::test_close_method - AttributeError: <module 'app.core.adaptive.coordinator' from 'C:\\Users\\tomas\\Desktop\\0001 DUOMENU ANALITIKA\\038_AnonymPDF\\app\\core\\adaptive\\coordinator.py'> does not have the ...
ERROR tests/system/test_adaptive_workflow.py::test_fixture_creation - TypeError: QualityAnalyzer.__init__() got an unexpected keyword argument 'storage_path'
ERROR tests/system/test_adaptive_workflow.py::test_feedback_creates_pattern_and_overrides_prediction - TypeError: QualityAnalyzer.__init__() got an unexpected keyword argument 'storage_path'
ERROR tests/system/test_adaptive_workflow.py::test_ab_testing_full_lifecycle - TypeError: QualityAnalyzer.__init__() got an unexpected keyword argument 'storage_path'
FAILED tests/test_analytics_engine.py::TestQualityAnalyzer::test_add_detection_results - sqlite3.OperationalError: no such table: detection_results
FAILED tests/test_analytics_engine.py::TestQualityAnalyzer::test_analyze_detection_quality_with_data - AssertionError: assert ('EMAIL' in {})
FAILED tests/test_analytics_engine.py::TestQualityInsightsGenerator::test_generate_report_with_insights - AttributeError: Mock object has no attribute 'get_detected_issues'
FAILED tests/test_config_manager.py::TestConfigManager::test_configuration_validation - assert False is True
FAILED tests/test_feedback_system.py::TestFeedbackSystemIntegration::test_feedback_submission_and_processing_flow - AttributeError: <app.core.training_data.TrainingDataCollector object at 0x000002753AB11F10> does not have the attribute 'save_training_examples'
FAILED tests/test_intelligent_cache.py::TestIntelligentCache::test_comprehensive_stats - KeyError: 'general'
FAILED tests/test_intelligent_cache.py::TestConcurrency::test_thread_safety - KeyError: 'general'
FAILED tests/test_memory_optimizer.py::TestIntegration::test_memory_threshold_handling - AssertionError: MemoryMonitor should log a warning for high memory usage
FAILED tests/test_ml_integration_layer.py::TestMLConfidenceScorerIntegration::test_adaptive_pattern_overrides_ml_model - TypeError: MLPrediction.__init__() got an unexpected keyword argument 'probability'
FAILED tests/test_morning_ses5_improvements.py::TestMorningSes5AntiOverredaction::test_no_preserve_pii_in_technical_sections - AssertionError: assert not True
FAILED tests/test_pdf_processor.py::test_find_personal_info - TypeError: unhashable type: 'list'
FAILED tests/test_pdf_processor.py::test_generate_redaction_report - TypeError: unhashable type: 'list'
FAILED tests/test_pdf_processor.py::test_process_pdf_failure_on_invalid_content - AssertionError: assert 'Failed to open document' in 'An exception occurred during anonymization'
FAILED tests/test_performance.py::TestPerformanceIntegration::test_get_performance_report - KeyError: 'parallel_processing'
FAILED tests/test_performance_enhanced.py::TestGlobalFunctions::test_get_performance_report - TypeError: 'dict' object does not support the context manager protocol
FAILED tests/test_performance_enhanced.py::TestGlobalFunctions::test_get_parallel_processor - KeyError: 'parallel_processing'
FAILED tests/test_performance_enhanced.py::TestGlobalFunctions::test_performance_report_with_optimizers - KeyError: 'parallel_processing'
FAILED tests/test_performance_enhanced.py::TestIntegration::test_end_to_end_parallel_processing - KeyError: 'parallel_processing'
FAILED tests/test_performance_enhanced.py::TestIntegration::test_concurrent_metric_collection - KeyError: 'parallel_processing'
FAILED tests/test_performance_enhanced.py::TestIntegration::test_performance_under_load - KeyError: 'parallel_processing'
FAILED tests/test_performance_optimizer.py::TestGlobalInstances::test_get_parallel_processor - KeyError: 'parallel_processing'
FAILED tests/test_performance_optimizer.py::TestGlobalInstances::test_get_batch_engine - KeyError: 'parallel_processing'
FAILED tests/test_performance_optimizer.py::TestIntegration::test_end_to_end_processing - KeyError: 'parallel_processing'
FAILED tests/test_performance_optimizer.py::TestIntegration::test_performance_improvement_simulation - KeyError: 'parallel_processing'
FAILED tests/test_real_time_monitor.py::TestAnomalyDetector::test_alert_threshold_integration - assert 0 > 0
FAILED tests/test_real_time_monitor.py::TestRealTimeMonitor::test_ml_monitor_callback_functionality - AssertionError: assert 0 == 1
FAILED tests/test_real_time_monitor.py::TestRealTimeMonitor::test_alert_callback_system - TypeError: Object of type Mock is not JSON serializable
FAILED tests/test_training_data_collector.py::TestTrainingDataStorage::test_save_and_load_training_examples - TypeError: create_dummy_example() got an unexpected keyword argument 'source'
FAILED tests/test_training_data_collector.py::TestTrainingDataStorage::test_get_dataset_stats_empty - AttributeError: 'NoneType' object has no attribute 'total_samples'
FAILED tests/test_training_data_collector.py::TestTrainingDataCollector::test_get_balanced_training_set_with_data - assert 6 == 13
FAILED tests/test_validation_utils.py::TestPersonNameValidation::test_length_validation - AssertionError: assert not True
FAILED tests/adaptive/test_ab_testing.py::TestABTestManager::test_record_and_evaluate_metrics_variant_wins - KeyError: 'winner'
FAILED tests/adaptive/test_online_learner.py::TestOnlineLearner::test_retrain_model_saves_examples_and_triggers_retraining - AttributeError: 'OnlineLearner' object has no attribute 'retrain_model'
FAILED tests/adaptive/test_online_learner.py::TestOnlineLearner::test_retrain_model_saves_examples_but_skips_retraining - AttributeError: 'OnlineLearner' object has no attribute 'retrain_model'
FAILED tests/adaptive/test_pattern_learner.py::TestPatternLearner::test_discover_and_validate_patterns - assert 0 == 1
=================================================================== 35 failed, 290 passed, 36 errors in 93.30s (0:01:33) ===================================================================
(venv) PS C:\Users\tomas\Desktop\0001 DUOMENU ANALITIKA\038_AnonymPDF>